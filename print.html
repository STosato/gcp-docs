<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook and mdzk -->
        <meta charset="UTF-8">
        <title>GCP notes</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="preconnect" href="https://fonts.googleapis.com"> 
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div style="text-align: center"><img src='Images/menu_header.png' style="max-width: 75%;"/></div>
            <div class="sidebar-scrollbox" style="top: 50px">
                <ol class="chapter"><li class="chapter-item "><a href="AI & ML Services/AI & ML Services.html"><strong aria-hidden="true">1.</strong> AI &amp; ML Services</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="AI & ML Services/AI Building Blocks.html"><strong aria-hidden="true">1.1.</strong> AI Building Blocks</a></li><li class="chapter-item "><a href="AI & ML Services/AI Hub.html"><strong aria-hidden="true">1.2.</strong> AI Hub</a></li><li class="chapter-item "><a href="AI & ML Services/AI Platform.html"><strong aria-hidden="true">1.3.</strong> AI Platform</a></li><li class="chapter-item "><a href="AI & ML Services/Cloud AutoML.html"><strong aria-hidden="true">1.4.</strong> Cloud AutoML</a></li></ol></li><li class="chapter-item "><a href="Compute Services/Compute Services.html"><strong aria-hidden="true">2.</strong> Compute Services</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="Compute Services/App Engine.html"><strong aria-hidden="true">2.1.</strong> App Engine</a></li><li class="chapter-item "><a href="Compute Services/Cloud Functions.html"><strong aria-hidden="true">2.2.</strong> Cloud Functions</a></li><li class="chapter-item "><a href="Compute Services/Compute Engine.html"><strong aria-hidden="true">2.3.</strong> Compute Engine</a></li><li class="chapter-item "><a href="Compute Services/Kubernetes Engine.html"><strong aria-hidden="true">2.4.</strong> Kubernetes Engine</a></li></ol></li><li class="chapter-item "><a href="Data Analytics Services/Data Analytics Services.html"><strong aria-hidden="true">3.</strong> Data Analytics Services</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="Data Analytics Services/BigQuery/BigQuery.html"><strong aria-hidden="true">3.1.</strong> BigQuery</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Storage & Database Services/Storage & Database Services.html"><strong aria-hidden="true">3.1.1.</strong> Storage &amp; Database Services</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Storage & Database Services/database_services.html"><strong aria-hidden="true">3.1.1.1.</strong> database_services</a></li></ol></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Architecture.html"><strong aria-hidden="true">3.1.2.</strong> Architecture</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Automatic schema detection.html"><strong aria-hidden="true">3.1.3.</strong> Automatic schema detection</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Best practices.html"><strong aria-hidden="true">3.1.4.</strong> Best practices</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Build Streaming data pipelines.html"><strong aria-hidden="true">3.1.5.</strong> Build Streaming data pipelines</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/CLI.html"><strong aria-hidden="true">3.1.6.</strong> CLI</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Caching.html"><strong aria-hidden="true">3.1.7.</strong> Caching</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Clustered Tables.html"><strong aria-hidden="true">3.1.8.</strong> Clustered Tables</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Copying dataset.html"><strong aria-hidden="true">3.1.9.</strong> Copying dataset</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Create & Query Permanent Table on Cloud Storage bucket.html"><strong aria-hidden="true">3.1.10.</strong> Create &amp; Query Permanent Table on Cloud Storage bucket</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Create Cloud Storage bucket.html"><strong aria-hidden="true">3.1.11.</strong> Create Cloud Storage bucket</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Designing Efficient Schemas.html"><strong aria-hidden="true">3.1.12.</strong> Designing Efficient Schemas</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Example of End-to-end Data Pipeline.html"><strong aria-hidden="true">3.1.13.</strong> Example of End-to-end Data Pipeline</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Execution Plan.html"><strong aria-hidden="true">3.1.14.</strong> Execution Plan</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/External data source Limitations.html"><strong aria-hidden="true">3.1.15.</strong> External data source Limitations</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Field partition.html"><strong aria-hidden="true">3.1.16.</strong> Field partition</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Ingestion time partition tables.html"><strong aria-hidden="true">3.1.17.</strong> Ingestion time partition tables</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Managing access.html"><strong aria-hidden="true">3.1.18.</strong> Managing access</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Manual operations on Table.html"><strong aria-hidden="true">3.1.19.</strong> Manual operations on Table</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Materialized Views.html"><strong aria-hidden="true">3.1.20.</strong> Materialized Views</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Maximum bytes billed.html"><strong aria-hidden="true">3.1.21.</strong> Maximum bytes billed</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Native operations on Table for Schema change.html"><strong aria-hidden="true">3.1.22.</strong> Native operations on Table for Schema change</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Pricing.html"><strong aria-hidden="true">3.1.23.</strong> Pricing</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Python lib.html"><strong aria-hidden="true">3.1.24.</strong> Python lib</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Query settings.html"><strong aria-hidden="true">3.1.25.</strong> Query settings</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Saved queries.html"><strong aria-hidden="true">3.1.26.</strong> Saved queries</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Scheduled queries.html"><strong aria-hidden="true">3.1.27.</strong> Scheduled queries</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Streaming data.html"><strong aria-hidden="true">3.1.28.</strong> Streaming data</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Table partitioning.html"><strong aria-hidden="true">3.1.29.</strong> Table partitioning</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/UI.html"><strong aria-hidden="true">3.1.30.</strong> UI</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Views.html"><strong aria-hidden="true">3.1.31.</strong> Views</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/When to use Clustering or Partitioning or Both.html"><strong aria-hidden="true">3.1.32.</strong> When to use Clustering or Partitioning or Both</a></li><li class="chapter-item "><a href="Data Analytics Services/BigQuery/Wildcards.html"><strong aria-hidden="true">3.1.33.</strong> Wildcards</a></li></ol></li><li class="chapter-item "><a href="Data Analytics Services/Big Query.html"><strong aria-hidden="true">3.2.</strong> Big Query</a></li><li class="chapter-item "><a href="Data Analytics Services/Cloud Dataflow.html"><strong aria-hidden="true">3.3.</strong> Cloud Dataflow</a></li><li class="chapter-item "><a href="Data Analytics Services/Cloud Datalab.html"><strong aria-hidden="true">3.4.</strong> Cloud Datalab</a></li><li class="chapter-item "><a href="Data Analytics Services/Cloud Dataproc.html"><strong aria-hidden="true">3.5.</strong> Cloud Dataproc</a></li><li class="chapter-item "><a href="Data Analytics Services/Cloud Pub Sub.html"><strong aria-hidden="true">3.6.</strong> Cloud Pub Sub</a></li><li class="chapter-item "><a href="Data Analytics Services/Data Studio.html"><strong aria-hidden="true">3.7.</strong> Data Studio</a></li></ol></li><li class="chapter-item "><a href="DevOps Services/DevOps Services.html"><strong aria-hidden="true">4.</strong> DevOps Services</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="DevOps Services/Cloud Build.html"><strong aria-hidden="true">4.1.</strong> Cloud Build</a></li><li class="chapter-item "><a href="DevOps Services/Cloud Source Repositories.html"><strong aria-hidden="true">4.2.</strong> Cloud Source Repositories</a></li><li class="chapter-item "><a href="DevOps Services/Container Registry.html"><strong aria-hidden="true">4.3.</strong> Container Registry</a></li><li class="chapter-item "><a href="DevOps Services/Example1.html"><strong aria-hidden="true">4.4.</strong> Example1</a></li></ol></li><li class="chapter-item "><div><strong aria-hidden="true">5.</strong> GCP-Notions</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="GCP-Notions/Project.html"><strong aria-hidden="true">5.1.</strong> Project</a></li><li class="chapter-item "><a href="GCP-Notions/Resource.html"><strong aria-hidden="true">5.2.</strong> Resource</a></li></ol></li><li class="chapter-item "><a href="Identity & Access Management/Identity & Access Management.html"><strong aria-hidden="true">6.</strong> Identity &amp; Access Management</a></li><li class="chapter-item "><div><strong aria-hidden="true">7.</strong> Images</div></li><li class="chapter-item "><a href="Network Services/Network Services.html"><strong aria-hidden="true">8.</strong> Network Services</a></li><li class="chapter-item "><div><strong aria-hidden="true">9.</strong> Notions</div><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="Notions/CI-CD.html"><strong aria-hidden="true">9.1.</strong> CI-CD</a></li><li class="chapter-item "><a href="Notions/Docker.html"><strong aria-hidden="true">9.2.</strong> Docker</a></li><li class="chapter-item "><a href="Notions/Ingestion.html"><strong aria-hidden="true">9.3.</strong> Ingestion</a></li><li class="chapter-item "><a href="Notions/Kubernetes.html"><strong aria-hidden="true">9.4.</strong> Kubernetes</a></li><li class="chapter-item "><a href="Notions/NoSQL.html"><strong aria-hidden="true">9.5.</strong> NoSQL</a></li><li class="chapter-item "><a href="Notions/Normalization-Denormalization.html"><strong aria-hidden="true">9.6.</strong> Normalization-Denormalization</a></li><li class="chapter-item "><a href="Notions/RDBMS.html"><strong aria-hidden="true">9.7.</strong> RDBMS</a></li><li class="chapter-item "><a href="Notions/REST.html"><strong aria-hidden="true">9.8.</strong> REST</a></li><li class="chapter-item "><a href="Notions/Redis.html"><strong aria-hidden="true">9.9.</strong> Redis</a></li><li class="chapter-item "><a href="Notions/Serverless.html"><strong aria-hidden="true">9.10.</strong> Serverless</a></li><li class="chapter-item "><a href="Notions/Window function.html"><strong aria-hidden="true">9.11.</strong> Window function</a></li><li class="chapter-item "><a href="Notions/failover.html"><strong aria-hidden="true">9.12.</strong> failover</a></li><li class="chapter-item "><a href="Notions/in-memory data store.html"><strong aria-hidden="true">9.13.</strong> in-memory data store</a></li><li class="chapter-item "><a href="Notions/on-premises.html"><strong aria-hidden="true">9.14.</strong> on-premises</a></li><li class="chapter-item "><a href="Notions/provisioning.html"><strong aria-hidden="true">9.15.</strong> provisioning</a></li></ol></li><li class="chapter-item "><a href="Main.html"><strong aria-hidden="true">10.</strong> Main</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        <button style="display: none;" id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="dark">Dark</button></li>
                        </ul>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="ai--ml-services"><a class="header" href="#ai--ml-services">AI &amp; ML Services</a></h1>
<p><a href="AI%20&amp;%20ML%20Services/./AI%20Building%20Blocks.html">AI Building Blocks</a> provide AI through simple REST calls<br />
<a href="AI%20&amp;%20ML%20Services/Cloud%20AutoML.html">Cloud AutoML</a> enables training models on custom datasets<br />
<a href="AI%20&amp;%20ML%20Services/AI%20Platform.html">AI Platform</a> provides end-to-end ML pipelines on-premises and cloud<br />
<a href="AI%20&amp;%20ML%20Services/AI%20Hub.html">AI Hub</a> is a Google hosted repository to discover, share, and deploy ML models. <em>It is a collection of artifacts and various resourses that can be shared</em></p>
<p><img src="AI%20&amp;%20ML%20Services/../Images/MLAI_usecases.png" alt="&quot;MLAI_usecases.png&quot;" /></p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="ai-building-blocks"><a class="header" href="#ai-building-blocks">AI Building Blocks</a></h1>
<p>All can be used via API </p>
<p><img src="AI%20&amp;%20ML%20Services/../Images/BuildingBlocks.png" alt="&quot;aaa&quot;" /></p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="ai-hub"><a class="header" href="#ai-hub">AI Hub</a></h1>
<p>Repository of plug-and-play AI Components</p>
<p>Includes:</p>
<ul>
<li>Kubeflow pipeline components</li>
<li>Jupyter</li>
<li>Tensorflow modules</li>
<li>VM images</li>
<li>Trained models</li>
</ul>
<p>Content shared between teams</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="ai-platform"><a class="header" href="#ai-platform">AI Platform</a></h1>
<p><em>provides end-to-end ML pipelines <a href="AI%20&amp;%20ML%20Services/../Notions/on-premises.html">on-premises</a> and cloud</em></p>
<p>For <strong>Advanced usecases</strong>: custom models</p>
<p>Built on <strong>Kubeflow</strong>, based on <a href="AI%20&amp;%20ML%20Services/../Notions/Kubernetes.html">Kubernetes</a></p>
<p>Includes tools for:</p>
<ul>
<li>Data preparation</li>
<li>training</li>
<li>inference</li>
</ul>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="cloud-automl"><a class="header" href="#cloud-automl">Cloud AutoML</a></h1>
<p>Enabls <strong>train models</strong> without writing code, using them as <em>black-box</em></p>
<h2 id="services"><a class="header" href="#services">Services</a></h2>
<p>Sight:</p>
<ul>
<li>Vision</li>
<li>Video Intelligence</li>
</ul>
<p>Language:</p>
<ul>
<li>NLP</li>
</ul>
<p>Structure Data</p>
<ul>
<li>Tabular data</li>
</ul>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="compute-services"><a class="header" href="#compute-services">Compute Services</a></h1>
<p>Where code is <strong>deployed</strong> and <strong>executed</strong> </p>
<ul>
<li><strong>Serverless environment</strong></li>
</ul>
<p>Choices:</p>
<ul>
<li><a href="Compute%20Services/App%20Engine.html">App Engine</a>: fully managed platform as a service (PaaS)</li>
<li><a href="Compute%20Services/Compute%20Engine.html">Compute Engine</a>: IaaS. Provides configurable VMs</li>
<li><a href="Compute%20Services/Kubernetes%20Engine.html">Kubernetes Engine</a>: orchestration (containers)</li>
<li><a href="Compute%20Services/Cloud%20Functions.html">Cloud Functions</a>: functions as a service (FaaS)</li>
</ul>
<h2 id="use-cases"><a class="header" href="#use-cases">Use cases</a></h2>
<p><img src="Compute%20Services/../Images/comp-services-use-cases.png" alt="&quot;alt&quot;" /></p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="app-engine"><a class="header" href="#app-engine">App Engine</a></h1>
<p>Fully managed platform: no need to deal with provisioning/configurating/scaling/managing/securing the platform.</p>
<p>Just: bring code -&gt; deploy -&gt; scale</p>
<p>Available in 2 environments:</p>
<ul>
<li><strong>Standard</strong>: runs in a <u>sandbox</u> <span class="blue">∼ with limitations</span></li>
<li><strong>Flexible</strong>: 
<ul>
<li>maximum control</li>
<li>uses <a href="Compute%20Services/../Notions/Docker.html">Docker</a> to deploy and scale</li>
</ul>
</li>
</ul>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="cloud-functions"><a class="header" href="#cloud-functions">Cloud Functions</a></h1>
<p><strong><a href="Compute%20Services/../Notions/Serverless.html">Serverless</a></strong> execution environment.</p>
<p>It is fundamentally different from App Engine, Compute Engine, <a href="Compute%20Services/../Notions/Kubernetes.html">Kubernetes</a> engine.</p>
<p><strong>Cloud functions</strong> are written as functions with a well defined entrypoint and returning , deploying with no changes.</p>
<p>Tipically serverless compute environments <strong>respond to events</strong> via <strong>triggers</strong>. They run like a daemon</p>
<p><img src="Compute%20Services/../Images/CloudFunctions.png" alt="&quot;alt&quot;" /></p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="compute-engine"><a class="header" href="#compute-engine">Compute Engine</a></h1>
<ul>
<li>Various fully configurable VMs</li>
<li><strong>Persistence</strong> is additional</li>
</ul>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="kubernetes-engine-gke"><a class="header" href="#kubernetes-engine-gke">Kubernetes Engine (GKE)</a></h1>
<p>Managed environment for deploying containerzed apps managed by <a href="Compute%20Services/../Notions/Kubernetes.html">Kubernetes</a></p>
<pre><code class="language-mermaid">graph LR

 A[Container IMG] --&gt;|packaging| B(Kubernetes artifacts)

 --&gt;|deploy| C[Cluster]

 --&gt; E[Scale]

</code></pre>
<p>Provides automatic:</p>
<ul>
<li>scaling</li>
<li>upgrades</li>
<li>repair</li>
</ul>
<h2 id="definitions"><a class="header" href="#definitions">Definitions</a></h2>
<h3 id="cluster"><a class="header" href="#cluster">Cluster</a></h3>
<p>group of machines called <em>nodes</em> that run containerized applications has at least 1 [[#Worker node]]</p>
<p>When Launching a cluster, GKE has 2 elements:</p>
<ul>
<li>[[#Control plane]] (managed)</li>
<li>data plane</li>
</ul>
<h3 id="worker-node"><a class="header" href="#worker-node">Worker node</a></h3>
<p>hosts [[#pod]] that are the components of application's workload</p>
<h3 id="pod"><a class="header" href="#pod">Pod</a></h3>
<p>A set of running containers in your cluster</p>
<h3 id="control-plane"><a class="header" href="#control-plane">Control plane</a></h3>
<p>Container's orchestration layer that exposes:</p>
<ul>
<li>API</li>
<li>Interfaces to define/deploy/manage the lifecycle of containers</li>
</ul>
<p>Manages [[#Worker node]]s and [[#Pod]]s in the [[#Cluster]]</p>
<p>In Production environments runs on multiple computers.</p>
<p><img src="Compute%20Services/../../Images/Kubernetes.png" alt="&quot;alt&quot;" /></p>
<h3 id="node-pool"><a class="header" href="#node-pool">Node pool</a></h3>
<p>GKE’s <strong>unique feature</strong>: mixes homogeneous (with same configuration) VMs.</p>
<p>When creating a cluster, a node pool is created.
Then you can add additional nodepools to the cluster <em>es. If you need more power</em></p>
<p>You can create/upgrade and delete nodespools without affecting the cluster.</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="data-analytics-services"><a class="header" href="#data-analytics-services">Data Analytics Services</a></h1>
<p>Uses <a href="Data%20Analytics%20Services/Cloud%20Pub%20Sub.html">Cloud Pub Sub</a> for ingesting data at scale</p>
<p><a href="Data%20Analytics%20Services/Cloud%20Dataflow.html">Cloud Dataflow</a> processes data in real-time or batch</p>
<p><a href="Data%20Analytics%20Services/Cloud%20Dataproc.html">Cloud Dataproc</a> is a Big Data service for Hadoop and Spark jobs</p>
<p><a href="Data%20Analytics%20Services/Cloud%20Datalab.html">Cloud Datalab</a> is for analyzing and visualizing data</p>
<p><a href="Data%20Analytics%20Services/Big%20Query.html">Big Query</a></p>
<p><a href="Data%20Analytics%20Services/Data%20Studio.html">Data Studio</a></p>
<h2 id="use-cases-1"><a class="header" href="#use-cases-1">Use Cases</a></h2>
<p><img src="Data%20Analytics%20Services/../Images/DAS_usecases.png" alt="&quot;alt&quot;" /></p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="bigquery"><a class="header" href="#bigquery">BigQuery</a></h1>
<p><a href="Data%20Analytics%20Services/BigQuery/../../Notions/Serverless.html">Serverless</a>, scalable cloud data warehouse</p>
<p>Has built-in BI Engine and Machine Learning</p>
<p>Uses SQL dialect </p>
<p>Federated queries can process external data sources:</p>
<ul>
<li><span class="missing-link" style="color:darkred;">Cloud Storage</span></li>
<li><span class="missing-link" style="color:darkred;">Cloud Bigtable</span></li>
<li>Spreadsheets</li>
</ul>
<p>Keeps 7 days history of history</p>
<p>Can analize big amounts of data in seconds</p>
<h2 id="architecture"><a class="header" href="#architecture"><a href="Data%20Analytics%20Services/BigQuery/Architecture.html">Architecture</a></a></h2>
<h2 id="ui"><a class="header" href="#ui"><a href="Data%20Analytics%20Services/BigQuery/UI.html">UI</a></a></h2>
<h2 id="how-query-execution-plan-works"><a class="header" href="#how-query-execution-plan-works"><a href="Data%20Analytics%20Services/BigQuery/Execution%20Plan.html">how Query Execution Plan works</a></a></h2>
<h2 id="query"><a class="header" href="#query">Query</a></h2>
<p><a href="Data%20Analytics%20Services/BigQuery/Query%20settings.html">Query settings</a>
<a href="Data%20Analytics%20Services/BigQuery/Caching.html">Caching</a>
<a href="Data%20Analytics%20Services/BigQuery/Wildcards.html">Wildcards</a>: Enables to query <strong>multiple tables at once</strong> using concise SQL statements
<a href="Data%20Analytics%20Services/BigQuery/Scheduled%20queries.html">Scheduled queries</a> and backfilling
<a href="Data%20Analytics%20Services/BigQuery/Saved%20queries.html">Saved queries</a></p>
<h2 id="schemas"><a class="header" href="#schemas">Schemas</a></h2>
<p><a href="Data%20Analytics%20Services/BigQuery/Automatic%20schema%20detection.html">Automatic schema detection</a>
<a href="Data%20Analytics%20Services/BigQuery/Designing%20Efficient%20Schemas.html">Designing Efficient Schemas</a> and <a href="Data%20Analytics%20Services/BigQuery/Designing%20Efficient%20Schemas.html#nested-repeated-data">Designing Efficient Schemas</a></p>
<h2 id="dataset"><a class="header" href="#dataset">Dataset</a></h2>
<p><a href="Data%20Analytics%20Services/BigQuery/Managing%20access.html">Managing access</a>
<a href="Data%20Analytics%20Services/BigQuery/Copying%20dataset.html">Copying dataset</a>
<a href="Data%20Analytics%20Services/BigQuery/Native%20operations%20on%20Table%20for%20Schema%20change.html">Native operations on Table for Schema change</a>
<a href="Data%20Analytics%20Services/BigQuery/Manual%20operations%20on%20Table.html">Manual operations on Table</a></p>
<h2 id="table-partitioning"><a class="header" href="#table-partitioning">Table partitioning</a></h2>
<p><a href="Data%20Analytics%20Services/BigQuery/Table%20partitioning.html">Table partitioning</a>
<a href="Data%20Analytics%20Services/BigQuery/Ingestion%20time%20partition%20tables.html">Ingestion time partition tables</a>
<a href="Data%20Analytics%20Services/BigQuery/Field%20partition.html">Field partition</a></p>
<h1 id="clustered-tables"><a class="header" href="#clustered-tables">Clustered Tables</a></h1>
<p><a href="Data%20Analytics%20Services/BigQuery/Clustered%20Tables.html">Clustered Tables</a>
<a href="Data%20Analytics%20Services/BigQuery/When%20to%20use%20Clustering%20or%20Partitioning%20or%20Both.html">When to use Clustering or Partitioning or Both</a>
==todo== create clustered table
==todo== <a href="Data%20Analytics%20Services/BigQuery/Clustered%20Tables.html#do-and-donts">Clustered Tables</a></p>
<h2 id="loading--querying-external-data-sources"><a class="header" href="#loading--querying-external-data-sources">Loading &amp; Querying External Data Sources</a></h2>
<p><em>It can be in BigTable, CloudStorage, ClousSQL, Google Drive...</em></p>
<p><a href="Data%20Analytics%20Services/BigQuery/Create%20Cloud%20Storage%20bucket.html">Create Cloud Storage bucket</a>
<a href="Data%20Analytics%20Services/BigQuery/Create%20&amp;%20Query%20Permanent%20Table%20on%20Cloud%20Storage%20bucket.html">Create &amp; Query Permanent Table on Cloud Storage bucket</a>
<a href="Data%20Analytics%20Services/BigQuery/External%20data%20source%20Limitations.html">External data source Limitations</a></p>
<h2 id="views"><a class="header" href="#views"><a href="Data%20Analytics%20Services/BigQuery/Views.html">Views</a></a></h2>
<p><a href="Data%20Analytics%20Services/BigQuery/Materialized%20Views.html">Materialized Views</a></p>
<h2 id="cli"><a class="header" href="#cli"><a href="Data%20Analytics%20Services/BigQuery/CLI.html">CLI</a></a></h2>
<h2 id="python-lib"><a class="header" href="#python-lib"><a href="Data%20Analytics%20Services/BigQuery/Python%20lib.html">Python lib</a></a></h2>
<p><a href="Data%20Analytics%20Services/BigQuery/Example%20of%20End-to-end%20Data%20Pipeline.html">Example of End-to-end Data Pipeline</a>
<a href="Data%20Analytics%20Services/BigQuery/Build%20Streaming%20data%20pipelines.html">Build Streaming data pipelines</a></p>
<h2 id="pricing"><a class="header" href="#pricing"><a href="Data%20Analytics%20Services/BigQuery/Pricing.html">Pricing</a></a></h2>
<h2 id="best-practices"><a class="header" href="#best-practices"><a href="Data%20Analytics%20Services/BigQuery/Best%20practices.html">Best practices</a></a></h2>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="storage--database-services"><a class="header" href="#storage--database-services">Storage &amp; Database Services</a></h1>
<h2 id="storage-services"><a class="header" href="#storage-services">Storage Services</a></h2>
<ul>
<li>Unified object storage for a variety of applications<br />
• Applications can store and retrieve objects through single API<br />
• GCS can scale to exabytes of data<br />
• Data can be stored within a single region, dual-region, or multi-region</li>
</ul>
<p><img src="Data%20Analytics%20Services/BigQuery/Storage%20&amp;%20Database%20Services/images/storage-services.png" alt="&quot;alt&quot;" /></p>
<h3 id="persistent-disks"><a class="header" href="#persistent-disks">Persistent disks</a></h3>
<ul>
<li>Independent (out of the context) from compute engine VMs</li>
<li>Only one writer, multiple readers</li>
<li>Can be replicated in <strong>regional</strong> or <strong>local</strong></li>
</ul>
<h3 id="cloud-filestore"><a class="header" href="#cloud-filestore">Cloud Filestore</a></h3>
<ul>
<li><strong>Managed</strong></li>
<li>For <strong>legacy</strong> apps</li>
<li>Shared &amp; NAS-like filesystem</li>
<li>for GCE e GKE</li>
<li>Useful for <a href="Data%20Analytics%20Services/BigQuery/Storage%20&amp;%20Database%20Services/../../../Notions/on-premises.html">on-premises</a> applications</li>
<li>Zonal storage for <strong>replications</strong></li>
<li>encrypted</li>
</ul>
<pre><code class="language-mermaid">graph TD

 A[Bucket] --&gt;B(Folder)

 A--&gt;C[Folder]

 C --&gt; D[File]

 C --&gt; E[File]
</code></pre>
<p>![&quot;alt&quot;](../../../Images/Pasted image 20211230165549.png)</p>
<h1 id="database_services"><a class="header" href="#database_services"><a href="Data%20Analytics%20Services/BigQuery/Storage%20&amp;%20Database%20Services/database_services.html">database_services</a></a></h1>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="gcp-database-services"><a class="header" href="#gcp-database-services">GCP Database Services</a></h1>
<p>Relies on <strong>NoSQL</strong> databases
Multi-region distribution
It has in-memory database used for accelerating the performances</p>
<h2 id="google-cloud-sql"><a class="header" href="#google-cloud-sql">Google Cloud SQL</a></h2>
<p><strong>Fully managed</strong> <a href="Data%20Analytics%20Services/BigQuery/Storage%20&amp;%20Database%20Services/../../../Notions/RDBMS.html">RDBMS</a> that simplifies the setup and mantainance.</p>
<p>Supports 3 types of RDBMS:</p>
<ul>
<li>MySQL</li>
<li>PostgreSQL</li>
<li>Microsoft SQL Server</li>
</ul>
<p>It delivers scalability, security and reliability of DB instances</p>
<h2 id="google-cloud-big-table"><a class="header" href="#google-cloud-big-table">Google Cloud Big Table</a></h2>
<p>Managed <a href="Data%20Analytics%20Services/BigQuery/Storage%20&amp;%20Database%20Services/../../../Notions/NoSQL.html">NoSQL</a> database service</p>
<p>Ideal for:</p>
<ul>
<li>Large scale &amp; low latency applications</li>
<li>throughput intensive data processing and analytics</li>
</ul>
<p>Is an alternative to Apache HBase column-oriented DB</p>
<h2 id="google-cloud-spanner"><a class="header" href="#google-cloud-spanner">Google Cloud Spanner</a></h2>
<p>Managed &amp; scalable <strong>Relational DB</strong> (and NOSQL) for <strong>regional and global</strong> application data</p>
<p>It <strong>horizontally scales</strong> across rows, regions and continents</p>
<p>Data is replicated synchronously</p>
<p>Its instances can be:</p>
<ul>
<li>R/W</li>
<li>Read only</li>
<li>Witness: checks consistency</li>
</ul>
<h2 id="google-cloud-memorystore"><a class="header" href="#google-cloud-memorystore">Google Cloud Memorystore</a></h2>
<p>Fully-managed <a href="Data%20Analytics%20Services/BigQuery/Storage%20&amp;%20Database%20Services/../../../Notions/in-memory%20data%20store.html">in-memory data store</a> service for <a href="Data%20Analytics%20Services/BigQuery/Storage%20&amp;%20Database%20Services/../../../Notions/Redis.html">Redis</a>.</p>
<p>Are ideal for applications caches providing sub-millisecond data access.</p>
<p>Promises 99.9% availability with automatic <a href="Data%20Analytics%20Services/BigQuery/Storage%20&amp;%20Database%20Services/../../../Notions/failover.html">failover</a></p>
<h2 id="use-cases-2"><a class="header" href="#use-cases-2">Use Cases</a></h2>
<p><img src="Data%20Analytics%20Services/BigQuery/Storage%20&amp;%20Database%20Services/images/db_services_usecases.png" alt="&quot;alt&quot;" /></p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="architecture-1"><a class="header" href="#architecture-1">Architecture</a></h1>
<h2 id="engine-dremel"><a class="header" href="#engine-dremel">Engine: <em>Dremel</em></a></h2>
<p>Combination of columnar data layouts and tree architecture</p>
<h2 id="file-system-colossus"><a class="header" href="#file-system-colossus">File System: <em>Colossus</em></a></h2>
<p>(Google distribuited filesystem)
It uses <strong>columnar storage</strong> and compression systems.</p>
<p>The <em>columnar format</em> is called &quot;capacitor&quot;</p>
<h3 id="column-vs-row-format"><a class="header" href="#column-vs-row-format">Column vs Row format</a></h3>
<p><img src="Data%20Analytics%20Services/BigQuery/../../Images/row-vs-column.png" alt="&quot;alt&quot;" /></p>
<p><strong>Row:</strong> columns are <u>tied</u> to each other and can't be separated.
<strong>Column</strong>: columns are in separated files that can be in separate disks.</p>
<p>In <em>Row format</em>, even if we selected <u>some columns</u>, the <strong>full table scan</strong> will be done.
In <em>column format</em> not. It can save time and can be parallelized.</p>
<h2 id="usual-columnar-formats-vs-bigquerys-capacitor"><a class="header" href="#usual-columnar-formats-vs-bigquerys-capacitor">Usual columnar formats vs BigQuery's capacitor</a></h2>
<p>The difference lies in <strong>how compression is operated</strong>:</p>
<p><strong>BigQuery</strong> can operate on <u>compressed data</u> without decompressing</p>
<h2 id="general-architecture"><a class="header" href="#general-architecture">General architecture</a></h2>
<p><img src="Data%20Analytics%20Services/BigQuery/../../Images/row-vs-column.png" alt="&quot;alt&quot;" /></p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="automatic-schema-detection"><a class="header" href="#automatic-schema-detection">Automatic schema detection</a></h1>
<p>BigQuery:</p>
<ol>
<li>selects a random file in source, </li>
<li>scans <em>up to 100 rows</em> as a sample </li>
<li>examinates each field and attempts to assign data type based on sample values</li>
</ol>
<h2 id="limitations"><a class="header" href="#limitations">Limitations</a></h2>
<p>This feature is only avaiable for CSV and Json file format.</p>
<blockquote>
<p><strong>Note that:</strong> all columns will be <strong>nullable by default</strong>. 
Otherwise you will need to insert fields manually</p>
</blockquote>
<h2 id="headers"><a class="header" href="#headers">Headers</a></h2>
<p>It infers headers by <strong>comparing the first row</strong> of the file with other rows.
If the first line contains only strings, and the other lines do not, BigQuery assumes that it is a header row.</p>
<p>Header is'nt taken into consideration while decidingthe schema of table.</p>
<h2 id="dates"><a class="header" href="#dates">Dates</a></h2>
<p>Must be in <code>YYYY-MM-DD</code> format</p>
<p><strong>Timestamps</strong> can be:</p>
<ul>
<li><code>hh:mm:ss YYYY-MM-DD</code></li>
<li><code>YYYY-MM-DD hh:mm:ss.mm</code></li>
</ul>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="best-practices-1"><a class="header" href="#best-practices-1">Best Practices</a></h1>
<h2 id="performance-and-cost-factors"><a class="header" href="#performance-and-cost-factors">Performance and cost factors</a></h2>
<ul>
<li>How many bytes are read from query</li>
<li>Shuffling: how many bytes does your query pass to each slot</li>
<li>Computation: CPU times</li>
<li>Outputs: how many bytes are written</li>
</ul>
<h2 id="reducing-bytes-read"><a class="header" href="#reducing-bytes-read">Reducing bytes read</a></h2>
<ul>
<li>Avoid <code>SELECT *</code></li>
<li><code>LIMIT</code> does not limit data scanned. Use &quot;<a href="Data%20Analytics%20Services/BigQuery/Maximum%20bytes%20billed.html">Maximum bytes billed</a>&quot; in query settings instead</li>
<li>Use partitioning or clustering</li>
<li>Use <a href="Data%20Analytics%20Services/BigQuery/../../Notions/Normalization-Denormalization.html">denormalization</a></li>
<li>Use <a href="Data%20Analytics%20Services/BigQuery/Materialized%20Views.html">Materialized Views</a> to keep aggregated data</li>
<li>Use cached results</li>
<li>Avoid external data source</li>
</ul>
<h2 id="sql-best-practices"><a class="header" href="#sql-best-practices">SQL best practices</a></h2>
<ul>
<li>Avoid <strong>self joins</strong> use <a href="Data%20Analytics%20Services/BigQuery/../../Notions/Window%20function.html">Window function</a> instead</li>
<li>Avoid <strong>cross joins</strong>, pre aggregate data or use <a href="Data%20Analytics%20Services/BigQuery/../../Notions/Window%20function.html">Window function</a></li>
<li>Avoid DML single row modifications</li>
</ul>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="build-streaming-data-pipelines"><a class="header" href="#build-streaming-data-pipelines">Build Streaming data pipelines</a></h1>
<p>Based on <a href="Data%20Analytics%20Services/BigQuery/../Cloud%20Pub%20Sub.html">Cloud Pub Sub</a> and <a href="Data%20Analytics%20Services/BigQuery/Example%20of%20End-to-end%20Data%20Pipeline.html">Example of End-to-end Data Pipeline</a>.</p>
<h3 id="set-streaming-option-to-true"><a class="header" href="#set-streaming-option-to-true">Set streaming option to true:</a></h3>
<p><code>options.view_as(StandardOptions).streaming = True</code></p>
<h3 id="reading-from-stream"><a class="header" href="#reading-from-stream">Reading from stream</a></h3>
<p>instead of <code>beam.io.readFromTxt()</code>, we must use <code>beam.io.ReadFromPubSub()</code></p>
<p>Then remove the pipelines:</p>
<ul>
<li>cleaned_data</li>
<li>delivered_orders</li>
<li>other_orders
This because streams are unbounded data and can't be grouped</li>
</ul>
<h3 id="adding-wait_until_finish"><a class="header" href="#adding-wait_until_finish">Adding wait_until_finish()</a></h3>
<p>adding after  <code>ret=p.run()</code>:
<code>ret.wait_until_finish()</code></p>
<blockquote>
<p>Note that the code after this line won't run until the finish of the pub/sub.
If we want to launch other commands we must creat a new thread and launch it before <code>wait_until_finish()</code></p>
</blockquote>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="bigquery-cli"><a class="header" href="#bigquery-cli">BigQuery CLI</a></h1>
<blockquote>
<p>You can avoid the <code>bs</code> command by opening the &quot;bigquery shell&quot; using <code>bq shell</code></p>
</blockquote>
<h3 id="showing-main-info"><a class="header" href="#showing-main-info">Showing main info</a></h3>
<p><code>bq show</code></p>
<h3 id="showing-schema"><a class="header" href="#showing-schema">Showing schema</a></h3>
<p><code>bq show -- schema dataset_name.names</code></p>
<h3 id="listing-datasets"><a class="header" href="#listing-datasets">Listing datasets</a></h3>
<p><code>bq ls</code></p>
<h2 id="execute-sql-query"><a class="header" href="#execute-sql-query">Execute SQL query</a></h2>
<p><code>bg query --use_legacy_sql=false &lt;query&gt;</code></p>
<h3 id="flags"><a class="header" href="#flags">Flags</a></h3>
<p><strong>--append_table</strong>
<strong>--destination_table</strong>
<strong>--replace:</strong> for overwriting destination table
<strong>--destination_schema:</strong> ir destination table doesn't exist, will be created with the specified schema
<strong>--time_partitioning_field:</strong> partitioning on some time (column name)
<strong>--time_partitioning_type:</strong> ingestion time <em>ie  day</em>
<strong>--time_partitioning_expiration</strong>
<strong>--clustering_fields:</strong> up to 4 comma separated columns to cluster
<strong>--destination_kms_key:</strong> resurce id of customer generated encryption key
<strong>--batch:</strong> batch mode
<strong>--maximum_bytes_billed</strong> 
<strong>--label:</strong> applying label to a query job
<strong>--dry_run:</strong> validator flag to check the correctness of a query and bytes to be processed
<strong>--max_rows:</strong> max rows to return
<strong>--require_cache:</strong> only run if can refer to cached results
<strong>--use_cache:</strong> set to <code>false</code> if not wanting to use cached results
<strong>--schedule:</strong> makes recurring scheduled query
<strong>--display_name:</strong> schedule's name
<strong>--target_dataset:</strong> destination table for scheduled queryes
<strong>--flatten_results:</strong> for nested and repeated fields</p>
<h2 id="flags-1"><a class="header" href="#flags-1">Flags</a></h2>
<pre><code>bq --global_flag1=value .. command --command_spacific_flag1=value .... dataset.tablename
</code></pre>
<h2 id="--format"><a class="header" href="#--format">--format</a></h2>
<p>Format of command's output</p>
<ul>
<li>pretty</li>
<li>sparse</li>
<li>prettyjson</li>
<li>json</li>
<li>csv</li>
</ul>
<h2 id="--job_id-commands-creating-job"><a class="header" href="#--job_id-commands-creating-job">--job_id (commands creating job)</a></h2>
<p>Giving a name to the job.</p>
<p>Used with <em>cp, load, extract..</em></p>
<p>==skipping creating dataset and table==</p>
<h1 id="cli-exclusive-operations"><a class="header" href="#cli-exclusive-operations">Cli Exclusive operations</a></h1>
<h2 id="making-field-nullable-relaking-field"><a class="header" href="#making-field-nullable-relaking-field">Making field nullable (relaking field)</a></h2>
<pre><code>bq load --schema_update_option ALLOW_FIELD_RELAXARION dataset_name.table_name &lt;filepath&gt; column_name:type,clumn2:type...
</code></pre>
<h2 id="copying-selected-partitions-of-a-table"><a class="header" href="#copying-selected-partitions-of-a-table">Copying selected partitions of a table</a></h2>
<pre><code>bq cp -a dataset.origin_table$partition dataset.destination
</code></pre>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="caching"><a class="header" href="#caching">Caching</a></h1>
<blockquote>
<p>If a query is cached, you won't be charged</p>
</blockquote>
<p>To retrieve data from stored cache, the query should be the <strong>exact replica</strong> of the original query.</p>
<p>It must have a size &lt;10Gb</p>
<br/>
<p><span class="red">Not cached</span>:</p>
<ul>
<li>When the <em>destination table</em> is spcidied to <strong>store results in in query</strong></li>
<li>If tables/views have <strong>changed</strong></li>
<li>In tables with <strong>streaming</strong> ingestion</li>
<li>If using <strong>non-deterministic functions</strong> like <em>timestamp(), now(), current_user()</em></li>
<li>Using <strong>external data sources</strong> like <em>BigTable or CloudStorage</em></li>
</ul>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="clustered-tables-1"><a class="header" href="#clustered-tables-1">Clustered Tables</a></h1>
<p>Clustering or Bucketing i a data organization tecnique (<em>like partition</em>) for decomposing large datasets into more manageable ports.</p>
<p>Fundamental of it is that when table is bucketed in a column, then all the records with <u>same column name</u> will go to the <strong>same bucket</strong>.</p>
<h3 id="example-salaries-db"><a class="header" href="#example-salaries-db">Example: salaries DB</a></h3>
<p>Bucketing on <strong>salary</strong> column.</p>
<p>A bucket will contain <u>people with same salary</u> (<span class="purple">purple box</span>) and nowhere else</p>
<blockquote>
<p><em><strong>Note:</strong></em> a bucket can contain multiple salaries values (<span class="orange">orange box</span>))</p>
</blockquote>
<p><img src="Data%20Analytics%20Services/BigQuery/../../Images/cluster-example.png" alt="&quot;alt&quot;" /></p>
<h2 id="do-and-donts"><a class="header" href="#do-and-donts">Do and Don'ts</a></h2>
<p>==section 8==</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="copying-dataset"><a class="header" href="#copying-dataset">Copying dataset</a></h1>
<p>Once created, a dataset <strong>can't change location</strong>. The only way to do that is <strong>making a copy</strong>.</p>
<p>First,</p>
<h2 id="1-enable-bigquery-data-transfer-api"><a class="header" href="#1-enable-bigquery-data-transfer-api">1. Enable BigQuery Data Transfer API</a></h2>
<p>Sidebar &gt; APIs &amp; Services &gt; Enable APIs &amp; Services &gt; search &quot;BigQuery Data Transfer API&quot; &gt; Enable</p>
<h2 id="2-create-a-new-dataset"><a class="header" href="#2-create-a-new-dataset">2. Create a new dataset</a></h2>
<p>&quot;Create Dataset&quot; button</p>
<h2 id="3-copying-the-dataset"><a class="header" href="#3-copying-the-dataset">3. Copying the dataset</a></h2>
<p>Go to the <strong>source dataset</strong> and click &quot;copy dataset&quot;
<img src="Data%20Analytics%20Services/BigQuery/../../Images/copyDataset1.png" alt="&quot;alt&quot;" /></p>
<p>Then select <strong>destination</strong></p>
<p><img src="Data%20Analytics%20Services/BigQuery/../../Images/CopyDataset2.png" alt="&quot;alt&quot;" /></p>
<h1 id="scheduling"><a class="header" href="#scheduling">Scheduling</a></h1>
<p>Left menu &gt; Transfers &gt; Create Transfer</p>
<p>Source: <strong>dataset copy</strong></p>
<p>set Transfer Config Name</p>
<p>set <strong>timing</strong></p>
<p>In the <strong>destination</strong>: the <strong>dataset ID</strong></p>
<h3 id="limitations-1"><a class="header" href="#limitations-1">Limitations</a></h3>
<ul>
<li>only <strong>one active copy</strong> at time</li>
<li>can't copy:
<ul>
<li>views</li>
<li>external tables</li>
<li>streaming buffer</li>
</ul>
</li>
</ul>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="create--query-permanent-table-on-cloud-storage-bucket"><a class="header" href="#create--query-permanent-table-on-cloud-storage-bucket">Create &amp; Query Permanent Table on Cloud Storage bucket</a></h1>
<p>&quot;Create Table&quot;</p>
<p>Create table from: &quot;Google Cloud storage&quot; &gt; Browse the file</p>
<p><strong>Table Type</strong> 2 options:</p>
<ul>
<li><strong>Native</strong>: directly to bigquery</li>
<li><strong>External</strong>: only linked to external</li>
</ul>
<blockquote>
<p><strong>Note:</strong> External data doesn't provide table preview and don't get how many bytes will be processed</p>
</blockquote>
<h3 id="permanent-vs-temporary-tables"><a class="header" href="#permanent-vs-temporary-tables">Permanent vs temporary tables</a></h3>
<p><img src="Data%20Analytics%20Services/BigQuery/../../Images/permanent_vs_temp_tables.png" alt="&quot;alt&quot;" /></p>
<h3 id="printing-filename-where-table-belongs"><a class="header" href="#printing-filename-where-table-belongs">Printing filename where table belongs</a></h3>
<pre><code class="language-sql">SELECT _FILE_NAME
</code></pre>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="create-cloud-storage-bucket"><a class="header" href="#create-cloud-storage-bucket">Create Cloud Storage bucket</a></h1>
<p><em>Applications may directly or indirectly store the project data into Cloud Storage in any structured or unstructured format.</em></p>
<p>Search &quot;storage&quot; and open it. That's the <strong>Storage Bucket</strong>
Click &quot;Create Bucket&quot; button.</p>
<p>All the failes uploaded on it will be accessible at <code>gs://bucket_name/filename.filename_format</code></p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="designing-efficient-schemas"><a class="header" href="#designing-efficient-schemas">Designing Efficient Schemas</a></h1>
<p>BigQuery performs better when database is <a href="Data%20Analytics%20Services/BigQuery/../../Notions/Normalization-Denormalization.html#denormalization">denormalized</a>.</p>
<p>But in this case  <code>GROUP BY</code> can slow down queries.
Here BigQuery supports columns with <strong>nested and repeated data</strong>.</p>
<h2 id="nested--repeated-data"><a class="header" href="#nested--repeated-data">Nested &amp; repeated data</a></h2>
<p>Here Data is not duplicated but in one table
Only <strong><span class="orange">nested</span> columns</strong> are <strong><span class="purple">repeated</span></strong></p>
<p>In BigQuery, <strong><span class="orange">nested</span> = struct</strong> and <strong><span class="purple">repeated</span> = array</strong>
-&gt; we will have <strong>array of structs</strong></p>
<p>So nested and repeated columns can <strong>mantain relationships</strong> without perdormance impact.</p>
<p><img src="Data%20Analytics%20Services/BigQuery/../../Images/nested-table-example.png" alt="&quot;alt&quot;" /></p>
<p>Here's the file</p>
<pre><code class="language-json">{
  &quot;orderId&quot;: 1,
  &quot;storeLocation&quot;: &quot;NY&quot;,
  &quot;products&quot;: [
    {
      &quot;productId&quot;: 1234,
      &quot;productCategory&quot;: &quot;Cosmetics&quot;,
      &quot;productName&quot;: &quot;shampoo&quot;,
      &quot;productPrice&quot;: 140
    },
    {
      &quot;productId&quot;: 421,
      &quot;productCategory&quot;: &quot;Kitchen&quot;,
      &quot;productName&quot;: &quot;grinder&quot;,
      &quot;productPrice&quot;: 240
    }
  ]
}
</code></pre>
<h2 id="specifying-nested-fields-in-schema"><a class="header" href="#specifying-nested-fields-in-schema">Specifying nested fields in schema</a></h2>
<p>You'll need to click &quot;Create table&quot; button</p>
<p>Then set type ==RECORD== and mode ==REPEATED==.
Then a <span class="green">+ (plus)</span> button will appear at the right of the <strong>Name field</strong> </p>
<p><img src="Data%20Analytics%20Services/BigQuery/../../Images/nested-field-schema-manual.png" alt="&quot;alt&quot;" /></p>
<h2 id="how-to-query-the-table"><a class="header" href="#how-to-query-the-table">How to query the table</a></h2>
<p>You'll need to use <code>UNNEST</code></p>
<pre><code class="language-sql">SELECT storeLocation, products 
FROM `bigquery-demo-285417.dataset1.kiopl` 
CROSS JOIN UNNEST(products) as a
where a.productName = &quot;Grinder&quot;
</code></pre>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="example-of-an-end-to-end-data-pipeline"><a class="header" href="#example-of-an-end-to-end-data-pipeline">Example of an End-to-end Data Pipeline</a></h1>
<p>We want to create ad appligation for analysis for a restaurant.
Each day we receive a csv file containing this information</p>
<p><img src="Data%20Analytics%20Services/BigQuery/../../Images/data-pipeline-example-table.png" alt="&quot;alt&quot;" /></p>
<h2 id="our-approach"><a class="header" href="#our-approach">Our approach</a></h2>
<p>![&quot;alt&quot;](../../Images/ExampleData Pipeline.png)</p>
<h3 id="using-apache-beam"><a class="header" href="#using-apache-beam">Using Apache Beam</a></h3>
<p>Apache Beam is an open source, unified model for defining both batch- and streaming-data parallel-processing pipelines. The Apache Beam programming model simplifies the mechanics of large-scale data processing
<code>pip install apache-beam[gcp]</code></p>
<h2 id="code"><a class="header" href="#code">Code</a></h2>
<h3 id="setup"><a class="header" href="#setup">Setup</a></h3>
<pre><code class="language-python">import apache_beam as beam
from apache_beam.options.pipeline_options import PipelineOptions, StandardOptions
import argparse
from google.cloud import bigquery

parser = argparse.ArgumentParser()

parser.add_argument('--input',
 dest='input',
 required=True,
 help='Input file to process.')

path_args, pipeline_args = parser.parse_known_args()
inputs_pattern = path_args.input
options = PipelineOptions(pipeline_args)
</code></pre>
<h3 id="creating-functions-for-cleaning-data"><a class="header" href="#creating-functions-for-cleaning-data">Creating functions for cleaning data</a></h3>
<pre><code class="language-python">def remove_last_colon(row): # OXJY167254JK,11-09-2020,8:11:21,854A854,Chow M?ein:,65,Cash,Sadabahar,Delivered,5,Awesome experience
	cols = row.split(',') # [(OXJY167254JK) (11-11-2020) (8:11:21) (854A854) (Chow M?ein:) (65) (Cash) ....]
	 item = str(cols[4]) # item = Chow M?ein:
	 if item.endswith(':'):
		 cols[4] = item[:-1] # cols[4] = Chow M?ein
	 return ','.join(cols) # OXJY167254JK,11-11-2020,8:11:21,854A854,Chow M?ein,65,Cash,Sadabahar,Delivered,5,Awesome experience

def remove_special_characters(row): # oxjy167254jk,11-11-2020,8:11:21,854a854,chow m?ein,65,cash,sadabahar,delivered,5,awesome experience
	import re
	cols = row.split(',') # [(oxjy167254jk) (11-11-2020) (8:11:21) (854a854) (chow m?ein) (65) (cash) ....]
	ret = ''
	for col in cols:
		clean_col = re.sub(r'[?%&amp;]','', col)
	ret = ret + clean_col + ',' # oxjy167254jk,11-11-2020,8:11:21,854a854,chow mein:,65,cash,sadabahar,delivered,5,awesome experience,
	ret = ret[:-1] # oxjy167254jk,11-11-2020,8:11:21,854A854,chow mein:,65,cash,sadabahar,delivered,5,awesome experience
	return ret

def print_row(row):
	print row

</code></pre>
<h3 id="creating-collections"><a class="header" href="#creating-collections">Creating collections</a></h3>
<pre><code class="language-python">delivered_orders = (
cleaned_data
| 'delivered filter' &gt;&gt; beam.Filter(lambda row: row.split(',')[8].lower() == 'delivered')
)

other_orders = (
cleaned_data
| 'Undelivered Filter' &gt;&gt; beam.Filter(lambda row: row.split(',')[8].lower() != 'delivered')
)

(cleaned_data
| 'count total' &gt;&gt; beam.combiners.Count.Globally() # 920
| 'total map' &gt;&gt; beam.Map(lambda x: 'Total Count:' +str(x)) # Total Count: 920
| 'print total' &gt;&gt; beam.Map(print_row)
)

(delivered_orders
| 'count delivered' &gt;&gt; beam.combiners.Count.Globally()
| 'delivered map' &gt;&gt; beam.Map(lambda x: 'Delivered count:'+str(x))
| 'print delivered count' &gt;&gt; beam.Map(print_row)
)

(other_orders
| 'count others' &gt;&gt; beam.combiners.Count.Globally()
| 'other map' &gt;&gt; beam.Map(lambda x: 'Others count:'+str(x))
| 'print undelivered' &gt;&gt; beam.Map(print_row)
)
</code></pre>
<h2 id="creating-dataset-and-adding-a-table"><a class="header" href="#creating-dataset-and-adding-a-table">Creating dataset and adding a table</a></h2>
<pre><code class="language-python">client = bigquery.Client()

dataset_id = &quot;{}.dataset_food_orders&quot;.format(client.project)

try:
	client.get_dataset(dataset_id)
	
except:
	dataset = bigquery.Dataset(dataset_id)  #

	dataset.location = &quot;US&quot;
	dataset.description = &quot;dataset for food orders&quot;

	dataset_ref = client.create_dataset(dataset, timeout=30)  # Make an API request.
	
def to_json(csv_str):
    fields = csv_str.split(',')
    
    json_str = {&quot;customer_id&quot;:fields[0],
                 &quot;date&quot;: fields[1],
                 &quot;timestamp&quot;: fields[2],
                 &quot;order_id&quot;: fields[3],
                 &quot;items&quot;: fields[4],
                 &quot;amount&quot;: fields[5],
                 &quot;mode&quot;: fields[6],
                 &quot;restaurant&quot;: fields[7],
                 &quot;status&quot;: fields[8],
                 &quot;ratings&quot;: fields[9],
                 &quot;feedback&quot;: fields[10],
                 &quot;new_col&quot;: fields[11]
                 }

    return json_str
	
table_schema = 'customer_id:STRING,date:STRING,timestamp:STRING,order_id:STRING,items:STRING,amount:STRING,mode:STRING,restaurant:STRING,status:STRING,ratings:STRING,feedback:STRING,new_col:STRING'

(delivered_orders
	| 'delivered to json' &gt;&gt; beam.Map(to_json)
	| 'write delivered' &gt;&gt; beam.io.WriteToBigQuery(
	delivered_table_spec,
	schema=table_schema,
	create_disposition=beam.io.BigQueryDisposition.CREATE_IF_NEEDED,
	write_disposition=beam.io.BigQueryDisposition.WRITE_APPEND,
	additional_bq_parameters={'timePartitioning': {'type': 'DAY'}}
	)
)

(other_orders
	| 'others to json' &gt;&gt; beam.Map(to_json)
	| 'write other_orders' &gt;&gt; beam.io.WriteToBigQuery(
	other_table_spec,
	schema=table_schema,
	create_disposition=beam.io.BigQueryDisposition.CREATE_IF_NEEDED,
	write_disposition=beam.io.BigQueryDisposition.WRITE_APPEND,
	additional_bq_parameters={'timePartitioning': {'type': 'DAY'}}
	)
)

from apache_beam.runners.runner import PipelineState
ret = p.run()
if ret.state == PipelineState.DONE:
    print('Success!!!')
else:
    print('Error Running beam pipeline')
</code></pre>
<h3 id="creating-a-view"><a class="header" href="#creating-a-view">Creating a view</a></h3>
<pre><code class="language-python">view_name = &quot;daily_food_orders&quot;
dataset_ref = client.dataset('dataset_food_orders_latest')
view_ref = dataset_ref.table(view_name)
view_to_create = bigquery.Table(view_ref)

view_to_create.view_query = 'select * from `bigquery-demo-285417.dataset_food_orders_latest.delivered_orders` where _PARTITIONDATE = DATE(current_date())'
view_to_create.view_use_legacy_sql = False

try:
	client.create_table(view_to_create)
	
except:
	print ('View already exists')
</code></pre>
<h2 id="run"><a class="header" href="#run">Run</a></h2>
<p><code>python code.py -- input file-path</code></p>
<h2 id="airflow"><a class="header" href="#airflow">Airflow</a></h2>
<p><code>pip3 install apache-airflow[gcp]</code></p>
<pre><code class="language-python">from airflow import models
from datetime import datetime, timedelta
from airflow.contrib.operators.dataflow_operator import DataFlowPythonOperator

default_args = {
    'owner': 'Airflow',
    'start_date': datetime(2020, 12, 24),
    'retries': 0,
    'retry_delay': timedelta(seconds=50),
	'dataflow_default_options': {
        'project': 'bigquery-demo-285417',
        'region': 'us-central1',
		'runner': 'DataflowRunner'
    }
}

with models.DAG('food_orders_dag',
         default_args=default_args,
         schedule_interval='@daily',
         catchup=False) as dag:
    
    t1 = DataFlowPythonOperator(
        task_id='beamtask',
        py_file='gs://us-central1-demo-food-order-e90e61dc-bucket/code_written_python_3.py',
        options={'input' : 'gs://daily_food_orders/food_daily.csv'}
    )
</code></pre>
<h3 id="cloud-composer"><a class="header" href="#cloud-composer">Cloud composer</a></h3>
<p>On Bq, search  &quot;Cloud composer&quot; &gt; create envirnoment</p>
<p><img src="Data%20Analytics%20Services/BigQuery/../../Images/Pasted%20image%2020220105162936.png" alt="&quot;alt&quot;" /></p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="query-plan-execution"><a class="header" href="#query-plan-execution">Query plan execution</a></h1>
<p>What is running under the wood when the query is running?</p>
<p>It breaks declarative SQL statements into granular sets of execution stages and designs an <strong>execution graph</strong></p>
<p><img src="Data%20Analytics%20Services/BigQuery/../../Images/planExecution.png" alt="&quot;alt&quot;" /></p>
<p>So will be created an <strong>Execution Plan</strong> to list all the parallel and dependent tasks.</p>
<p>To achieve that level of performance, BigQuery executes queries <strong>completely in memory</strong>.</p>
<p><a href="https://cloud.google.com/blog/big-data/2016/01/bigquery-under-the-hood">BigQuery’s execution engine</a> builds simple and purely in-memory operators and achieves petabyte-scale analytics through scalable data repartitioning, or &quot;shuffle.&quot;</p>
<h2 id="shuffle"><a class="header" href="#shuffle">Shuffle</a></h2>
<p>Is a key ingredient in any distributed data processing system.</p>
<p>The shuffle step is required for execution of <strong>large and complex joins</strong>, <strong>aggregations</strong> and <strong>analytic operations</strong>.</p>
<blockquote>
<p><em><strong>Note:</strong></em> The shuffle step is notoriously slow</p>
</blockquote>
<p>n-memory BigQuery shuffle stores intermediate data produced from various stages of query processing in a set of nodes that are dedicated to hosting remote memory.</p>
<h3 id="data-partitioning"><a class="header" href="#data-partitioning">Data partitioning</a></h3>
<p>The data repartitioning abstraction defined by BigQuery shuffle consists of three entities: </p>
<ol>
<li><strong>producer</strong> creates data to be repartitioned, </li>
<li><strong>consumer</strong> receives the repartitioned data</li>
<li><strong>controller</strong> process manages the shuffle. </li>
</ol>
<p>Shuffle defines the following high-level operations:</p>
<pre><code>Producer (producer_id) {  
  void SendRow(row, consumer_id) : Called to send a row to a given consumer  
                                   on behalf of this producer.
}

Consumer (consumer_id) {  
  string ReceiveRow() : Called to receive one row for this consumer.
}

Controller {  
  StartShuffle() : Called before any producers or consumers start sending or 
                   receiving rows.   
  EndShuffle()   : Called after all producers and consumers have successfully                   
                   sent and received all rows. 
}

</code></pre>
<p><a href="https://cloud.google.com/blog/products/bigquery/in-memory-query-execution-in-google-bigquery">More</a></p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="external-data-source-limitations"><a class="header" href="#external-data-source-limitations">External data source Limitations</a></h1>
<ul>
<li><strong>Data consistency is not guaranteed</strong></li>
<li>External data source might not have as high performances as BigQuery</li>
<li>Can't run jobs to export data</li>
<li>Can't reference external data source in wildcard tables</li>
<li>Partition or clustering might be limited</li>
<li>No caching</li>
</ul>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="field-partition"><a class="header" href="#field-partition">Field partition</a></h1>
<h2 id="nullwrong-format"><a class="header" href="#nullwrong-format">Null/wrong format</a></h2>
<p>In the partition summary:
<code>partition_id</code> will have <code>_NULL_</code> or <code>_UNPARTITIONED_</code></p>
<h3 id="unpartitioned-list"><a class="header" href="#unpartitioned-list">Unpartitioned list</a></h3>
<pre><code>SELECT * FROM [dataset.table$__UNPARTITIONED__]
</code></pre>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="ingestion-time-partition-tables"><a class="header" href="#ingestion-time-partition-tables">Ingestion time partition tables</a></h1>
<blockquote>
<p>Data inserted today will remain in today's partition.</p>
</blockquote>
<p>When selecting pseudo-columns, you must use <strong>aliases</strong>.</p>
<ul>
<li><code>_PARTITIONTIME</code></li>
<li><code>_PARTITIONDATE</code></li>
</ul>
<h2 id="getting-summary"><a class="header" href="#getting-summary">Getting summary</a></h2>
<pre><code class="language-sql">SELECT * FROM [dataset.table$__PARTITIONS_SUMMARY__]
</code></pre>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="managing-dataset-access-permissions"><a class="header" href="#managing-dataset-access-permissions">Managing dataset access permissions</a></h1>
<p>Dataset &gt; Share dataset</p>
<p><img src="Data%20Analytics%20Services/BigQuery/../../Images/dataset-permissions.png" alt="&quot;alt&quot;" /></p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="manual-operations-on-table"><a class="header" href="#manual-operations-on-table">Manual operations on Table</a></h1>
<h2 id="changing-column-names"><a class="header" href="#changing-column-names">Changing column names</a></h2>
<p>Can be done by writing a query where setting <strong>aliases</strong> for the new columns</p>
<pre><code class="language-sql">SELECT * EXCEPT(name_to_change),
	  name_to_change as new_name
FROM table_name
</code></pre>
<p>Then select <strong>query settings</strong></p>
<p><img src="Data%20Analytics%20Services/BigQuery/../../Images/queryOptions-overwrite.png" alt="&quot;alt&quot;" /></p>
<h2 id="changing-datatype"><a class="header" href="#changing-datatype">Changing datatype</a></h2>
<p>By using a query where we cast the desired column to the desired data type.</p>
<p><em><strong>NB:</strong></em> Some types can't be directly casted</p>
<pre><code class="language-sql">SELECT * EXCEPT(col_to_change),
	  CAST(col_to_change as TYPE) as col_to_change
FROM table_name
</code></pre>
<p>Then use the same  <strong>query settings</strong> as [[#Changing column names]].</p>
<h2 id="deleting-column"><a class="header" href="#deleting-column">Deleting column</a></h2>
<pre><code class="language-sql">SELECT * EXCEPT(col_to_remove),
FROM table_name
</code></pre>
<p>Then use the same  <strong>query settings</strong> as [[#Changing column names]].</p>
<hr />
<h2 id="changing-column-mode"><a class="header" href="#changing-column-mode">Changing column mode</a></h2>
<p>Using cloud storage to save the old table and creating a new one, then restoring.</p>
<hr />
<h2 id="getting-old-table-values"><a class="header" href="#getting-old-table-values">Getting old table values</a></h2>
<p>You can get a table value from the last <strong>7 days</strong>.</p>
<p>Here's an example:</p>
<pre><code class="language-sql">select * 
FROM table_name FOR SYSTEM_TIME AS OF TIMESTAMP_SUB(CURRENT_TIMESTAMP(), INTERVAL 1 HOUR)
</code></pre>
<p>then, by &quot;query settings&quot; you can save it wherever you want.</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="materialized-views"><a class="header" href="#materialized-views">Materialized Views</a></h1>
<p>Compared to normal views :</p>
<ul>
<li>occupy <strong>disk space</strong></li>
<li>are <strong>pre-computed</strong>, so they don't refer to base tables.</li>
<li>Data can be manually or auto refreshed</li>
<li><span class="green">are faster</span>: normal ones firstly are applied to base tables. Instead, material ones are pre-computed</li>
<li><strong>smart tuning</strong>: if a query can be served with an already created materialized view, this will be done</li>
</ul>
<h2 id="example"><a class="header" href="#example">Example</a></h2>
<p><img src="Data%20Analytics%20Services/BigQuery/../../Images/creating_materialized-view.png" alt="&quot;alt&quot;" /></p>
<h2 id="create-a-materialized-view"><a class="header" href="#create-a-materialized-view">Create a Materialized view</a></h2>
<p>Simply by using <code>CREATE MATERIALIZED VIEW name AS ...</code></p>
<ul>
<li><strong>aggregation functions</strong> must reference a <span class="red"><strong>single table</strong> only</span></li>
<li><span class="red">No <strong>joins</strong></span></li>
</ul>
<p>Supports only fiew aggregation functions:</p>
<ul>
<li><code>ANY_VALUE</code> (but not over <code>STRUCT</code>)</li>
<li><code>APPROX_COUNT_DISTINCT</code></li>
<li><code>ARRAY_AGG</code> (but not over <code>ARRAY</code> or <code>STRUCT</code>)</li>
<li><code>AVG</code></li>
<li><code>BIT_AND</code></li>
<li><code>BIT_OR</code></li>
<li><code>BIT_XOR</code></li>
<li><code>COUNT</code></li>
<li><code>COUNTIF</code></li>
<li><code>HLL_COUNT.INIT</code></li>
<li><code>LOGICAL_AND</code></li>
<li><code>LOGICAL_OR</code></li>
<li><code>MAX</code></li>
<li><code>MIN</code></li>
<li><code>SUM</code></li>
</ul>
<p>Other infos:</p>
<ul>
<li>can be partitioned and clustered</li>
<li>can be manipulated only by <code>CREATE, DROP, ALTER</code></li>
</ul>
<h2 id="how-to-write-optimized-materialized-views"><a class="header" href="#how-to-write-optimized-materialized-views">How to write optimized materialized views</a></h2>
<ul>
<li>Avoiding filtering or computations</li>
</ul>
<h2 id="manual-refresh"><a class="header" href="#manual-refresh">Manual refresh</a></h2>
<p><code>CALL BQ.REFRESH_MATERIALIZED_VIEW('view_name'</code></p>
<h2 id="set-auto-refresh"><a class="header" href="#set-auto-refresh">Set auto-refresh</a></h2>
<p>When creating a view
<code>OPTION (enable_refresh = true)</code></p>
<p>or with <strong>ALTER</strong>
<code>ALTER MATERIALIZED VIEW view_name SET OPTIONS(enable_refresh = true) </code></p>
<h3 id="interval-of-refresh"><a class="header" href="#interval-of-refresh">Interval of refresh</a></h3>
<p>you can add <code>refresh_interval_minutes=60</code></p>
<h2 id="limitations-2"><a class="header" href="#limitations-2">Limitations</a></h2>
<ul>
<li>can't copy with jobs</li>
<li>Can't export data</li>
<li>can't load data in it with load query</li>
<li>can't use DML statements over ita</li>
<li>should have the same dataset location</li>
<li>limited aggregation functions</li>
<li>reference limited to <strong>one single table</strong></li>
<li>can't nest other materialized views</li>
<li>onli standard SQL can be used</li>
<li>max 20 for base table</li>
</ul>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h2 id="console"><a class="header" href="#console">Console</a></h2>
<ol>
<li>In the <strong>Query editor</strong>, click <strong>More</strong>, click <strong>Query settings</strong>, and then click <strong>Advanced options</strong>.</li>
<li>In the <strong>Maximum bytes billed</strong> field, enter an integer.</li>
<li>Click <strong>Save</strong>.</li>
</ol>
<blockquote>
<p>It blocks queryes greater than  <strong>Maximum bytes billed</strong> field</p>
</blockquote>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="native-operations-on-table-for-schema-change"><a class="header" href="#native-operations-on-table-for-schema-change">Native operations on Table for Schema change</a></h1>
<p>By using the BigQuery's UI (&quot;Edit Schema&quot; button) you can do only limited  of table schema changes:</p>
<h2 id="adding-new-fields"><a class="header" href="#adding-new-fields">Adding new fields</a></h2>
<p>Them can only be:</p>
<ul>
<li>nullable</li>
<li>repeated</li>
</ul>
<p><u>required</u> ones <u>arent'possible</u></p>
<h3 id="updating-existing-data-with-new-fields-values"><a class="header" href="#updating-existing-data-with-new-fields-values">Updating existing data with new fields values</a></h3>
<p>Can be done by &quot;create table&quot; with the <strong>same name as the destination table</strong> and setting.</p>
<p>In <strong>Advanced Options</strong>, set <strong>write preferences</strong> as <u>overwrite table</u>. So the <strong>table will be updated</strong>.</p>
<blockquote>
<p>You'll need to insert the new schema when creating the &quot;new&quot; table</p>
</blockquote>
<h3 id="appending-rows"><a class="header" href="#appending-rows">Appending rows</a></h3>
<p>Same as updating but in <strong>advanced options</strong>, set <strong>append</strong>.</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="pricing-1"><a class="header" href="#pricing-1">Pricing</a></h1>
<p><a href="https://cloud.google.com/products/calculator">Calculator</a></p>
<h2 id="storage"><a class="header" href="#storage">Storage</a></h2>
<p>Two types:</p>
<p><strong>Active storage</strong>= table/partition that has been modified in past 90 days.
Usually 0,02$ per month but <u>first 10Gb are free every month</u></p>
<p><strong>Long term storage</strong>: data is not been modified in past 90 days.
Discounted 50% off.
<u>Pro:</u> works also for partitions, if only one is active, the others will remain long-term.</p>
<h2 id="queries-run"><a class="header" href="#queries-run">Queries run</a></h2>
<p><strong>On-demand</strong> (default): charges only when the query is run. Charges are decided by <u>number of bytes scanned</u>
Usually from 5$ (multi-region) to 9$ per Tb. <u>first 1 Tb are free every month</u> </p>
<p><strong>Flat-rate</strong>: pay upfront to get a desired number of dedicated resources/slots for month/year</p>
<h2 id="free-ops"><a class="header" href="#free-ops">Free ops</a></h2>
<ul>
<li>copy/delete/export table</li>
<li>loading from Cloud storage or Local files</li>
</ul>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="python-client-library"><a class="header" href="#python-client-library">Python Client Library</a></h1>
<h2 id="preliminary"><a class="header" href="#preliminary">Preliminary</a></h2>
<h3 id="1-setting-service-account-key"><a class="header" href="#1-setting-service-account-key">1. Setting service account key</a></h3>
<p>IAM &amp; Admin &gt; Service Accounts &gt; New Service account and get a <strong>service key</strong></p>
<h3 id="2-install-package"><a class="header" href="#2-install-package">2. install package</a></h3>
<p>pip install google-cloud-bigquery</p>
<h2 id="create-dataset"><a class="header" href="#create-dataset">Create dataset</a></h2>
<pre><code class="language-python">from google.cloud import bigquery
# Getting aggount
SERVICE_ACCOUNT_JSON=r'path to account json'

client = bigquery.Client.from_service_account_json(SERVICE_ACCOUNT_JSON)
# Setting dataset parameters
dataset_id = &quot;&lt;dataset_id&gt;&quot;
# Construct a full Dataset object to send to the API.
dataset = bigquery.Dataset(dataset_id)
dataset.location = &quot;US&quot;
dataset.description= &quot;desc&quot;
# Send the dataset to the API for creation, with an explicit timeout.
# Raises google.api_core.exceptions.Conflict if the Dataset already
# exists within the project.
dataset_ref = client.create_dataset(dataset, timeout=30)

print(dataset_ref.dataset_id)
</code></pre>
<h2 id="create-table"><a class="header" href="#create-table">Create table</a></h2>
<pre><code class="language-python">from google.cloud import bigquery
SERVICE_ACCOUNT_JSON=r'path to account json'

# Construct a BigQuery client object.
client = bigquery.Client.from_service_account_json(SERVICE_ACCOUNT_JSON)

# TODO(developer): Set table_id to the ID of the table to create.
table_id = &quot;bigquery-demo-285417.dataset_new.table_py&quot;

job_config = bigquery.LoadJobConfig(
    schema=[
        bigquery.SchemaField(&quot;name&quot;, &quot;STRING&quot;),
        bigquery.SchemaField(&quot;gender&quot;, &quot;STRING&quot;),
		bigquery.SchemaField(&quot;count&quot;, &quot;INTEGER&quot;)
    ],
	source_format=bigquery.SourceFormat.CSV, skip_leading_rows=1, autodetect=True,
)
file_path=r'F:\record\Big Query\codes and data\names\yob1880.txt'
source_file = open(file_path, &quot;rb&quot;)
job = client.load_table_from_file(source_file, table_id, job_config=job_config)

job.result()  # Waits for the job to complete.

table = client.get_table(table_id)  # Make an API request.
print(
    &quot;Loaded {} rows and {} columns to {}&quot;.format(
        table.num_rows, table_id
    )
)
</code></pre>
<h2 id="query-1"><a class="header" href="#query-1">Query</a></h2>
<pre><code class="language-python">from google.cloud import bigquery
SERVICE_ACCOUNT_JSON=r'path to account json'

# Construct a BigQuery client object.
client = bigquery.Client.from_service_account_json(SERVICE_ACCOUNT_JSON)
query_to_run = &quot;your query here&quot;

query_job=client.query(query_to_run)

print(query_job)
</code></pre>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="query-settings"><a class="header" href="#query-settings">Query settings</a></h1>
<ul>
<li><a href="Data%20Analytics%20Services/BigQuery/Streaming%20data.html">Streaming data</a>: for data outside google <em>pub/sub, Cloud Dataflow</em></li>
<li><strong>Destination</strong>:
<ul>
<li><strong>tamporary table</strong>: randomly named, saved in a special dataset. 
<ul>
<li>Not sharable</li>
<li>not queryable</li>
<li>duration of 24 hours</li>
</ul>
</li>
<li>permanent table </li>
</ul>
</li>
<li><strong>Job priority</strong>:
<ul>
<li><strong>Interactive</strong>: <span class="green">running immediately</span></li>
<li><strong>Batch</strong>: <span class="orange">starts as soon as idle resources are avaiable</span> (few miutes). When available, queries can be done concurrently</li>
</ul>
</li>
</ul>
<h2 id="blocking-too-heavy-queries-"><a class="header" href="#blocking-too-heavy-queries-">Blocking too heavy queries ($)</a></h2>
<p>You can set the <strong><a href="Data%20Analytics%20Services/BigQuery/Maximum%20bytes%20billed.html">Maximum bytes billed</a></strong> field to execute only the values with less bytes. </p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="saved-queries"><a class="header" href="#saved-queries">Saved queries</a></h1>
<p>You can set name and <strong>visibility</strong>.</p>
<h2 id="visibility"><a class="header" href="#visibility">Visibility</a></h2>
<ul>
<li>Personal</li>
<li>Project: are visible to BigQuery <a href="Data%20Analytics%20Services/BigQuery/../../Identity%20&amp;%20Access%20Management/Identity%20&amp;%20Access%20Management.html">Identity &amp; Access Management</a> roles</li>
</ul>
<h2 id="shareable-links"><a class="header" href="#shareable-links">Shareable links</a></h2>
<p>A saved query offers a sherable link for <u>other members of the team</u> that offers <strong>query text only</strong>.</p>
<p>To view to tables or views, a user should have proper accesses.</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="scheduled-queries"><a class="header" href="#scheduled-queries">Scheduled Queries</a></h1>
<h2 id="backfilling-mechanism"><a class="header" href="#backfilling-mechanism">Backfilling Mechanism</a></h2>
<p>Running the queries for <strong>previous dates</strong> which the scheduled queries run may have <span class="red">got missed</span>.</p>
<h3 id="example-1"><a class="header" href="#example-1">Example</a></h3>
<p>Suppose having:</p>
<ul>
<li>a <em>source table</em> that is refreshed daily</li>
<li>a <em>scheduled query</em> that runs every day that looks out the <em>source table</em> and <u>based on the current date</u> loads it to <em>another table</em></li>
</ul>
<p>If some day, <em>source table</em> is corrupted and <u>not populated</u> for the last 3 days.
Suppose you have <strong>restored the last 3 days</strong> on <em>source table</em>.</p>
<p>Is last three days data in the <em>another table</em> gone? <strong>No</strong></p>
<p><strong>Backfill</strong> allows us to run the query within a <u>pecified date range</u></p>
<h3 id="hou-to-use-backfill"><a class="header" href="#hou-to-use-backfill">Hou to use Backfill</a></h3>
<p>Go to BigQuery &gt; Scheduled queries &gt; More <em>(on top right of the page)</em> &gt; Schedule backfill. (see image)</p>
<p>Here:</p>
<ul>
<li><strong>start date</strong> is <span class="green">inclusive</span></li>
<li><strong>end date</strong> is <span class="red">exclusive</span></li>
</ul>
<blockquote>
<p><em><strong>Note:</strong></em> here the dates must be in <span class="red">UTC</span>, but <em>queries schedules in dashboard</em> are in local timezone</p>
</blockquote>
<p><img src="Data%20Analytics%20Services/BigQuery/../../Images/backfill.png" alt="&quot;alt&quot;" /></p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><p>When data is coming from:</p>
<ul>
<li>pub/sub</li>
<li><a href="Data%20Analytics%20Services/BigQuery/../Cloud%20Dataflow.html">Cloud Dataflow</a></li>
</ul>
<h2 id="1-setting-up"><a class="header" href="#1-setting-up">1. Setting up</a></h2>
<p>You can use Query settings &gt; Query Engine: <strong>Cloud Dataflow Engine</strong> &gt; Save</p>
<p>Then, in <strong>Resources</strong> tab select <strong>Cloud Dataflow Sources</strong>
![[Pasted image 20211230124507.png]]</p>
<h2 id="2-create-dataflow-job"><a class="header" href="#2-create-dataflow-job">2. Create Dataflow Job</a></h2>
<p><img src="Data%20Analytics%20Services/BigQuery/../../Images/dataflow-job.png" alt="&quot;alt&quot;" /></p>
<p>The <strong>destination</strong> can be <em>BigQuery table</em> or <em>Pub/Sub topic</em></p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="table-partitioning-1"><a class="header" href="#table-partitioning-1">Table partitioning</a></h1>
<p><strong>Breaking the table logically</strong> into smaller segments <strong>based on some criteria</strong>, <em>i.e. the column which we know is going to get used very frequently in where clause.</em></p>
<p>Partitioning makes the table easy to manage, performance is enhanced.</p>
<h2 id="advantages"><a class="header" href="#advantages">Advantages</a></h2>
<ul>
<li>Improves query performance and is cost-effective</li>
<li>Increases parallelism</li>
<li>Independent partitions can be managed indipendently</li>
<li>Different partitions can live on different filesystems: <em>less frequently accessed data can be placed on slower disks</em></li>
<li>Useful while doing upserts on bulk table (for daily incremental loads in datawarehouse)</li>
</ul>
<h2 id="bulk-data-example"><a class="header" href="#bulk-data-example">Bulk data example</a></h2>
<p>We have a huge <strong>target table</strong> in the datawarehouse. It's not partitioned.</p>
<p>The <strong>source table</strong> is some transactional database containing monthly data and gets refreshed daily with <u>increments</u>.</p>
<p><img src="Data%20Analytics%20Services/BigQuery/../../Images/bulk-data1.png" alt="&quot;alt&quot;" /></p>
<h3 id="solution"><a class="header" href="#solution">Solution</a></h3>
<p>Partitioning target table on month. And daily <strong>switching the partition with a new one</strong> 
from source table.</p>
<p>This takes less time
<img src="Data%20Analytics%20Services/BigQuery/../../Images/datawarehouse-partitioning.png" alt="&quot;alt&quot;" /></p>
<h2 id="creating-partitioned-table"><a class="header" href="#creating-partitioned-table">Creating partitioned table</a></h2>
<p>When creating a table,
in <strong>Partition and cluster settings</strong>, choose between:</p>
<ul>
<li>partition by ingestion time (example <a href="Data%20Analytics%20Services/BigQuery/Ingestion%20time%20partition%20tables.html">Ingestion time partition tables</a>)</li>
<li>or partition by field (example <a href="Data%20Analytics%20Services/BigQuery/Field%20partition.html">Field partition</a>)</li>
</ul>
<h3 id="require-partitioning-filter-optional"><a class="header" href="#require-partitioning-filter-optional">Require partitioning filter (optional)</a></h3>
<p>Users are mandate to include a WHERE clause on the partitioning column qhile they query the table.</p>
<p>This implies that user is forced to take full use of partitioning while the table is partitioned.
It may <strong>reduce cost</strong> and <strong>improve performances</strong></p>
<h2 id="copy-and-paste"><a class="header" href="#copy-and-paste">Copy and paste</a></h2>
<p><img src="Data%20Analytics%20Services/BigQuery/../../Images/partitioning-options.png" alt="&quot;alt&quot;" /></p>
<h2 id="dml-ops"><a class="header" href="#dml-ops">DML ops</a></h2>
<p>Same as normal but adding a <strong>fltering on the partition</strong></p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="big-querys-ui"><a class="header" href="#big-querys-ui">Big Query's UI</a></h1>
<h2 id="jobs-history"><a class="header" href="#jobs-history">Jobs history</a></h2>
<p>Displays project's load,export and copy jobs.</p>
<p>Displays the last 6 months, limited to 1000 entries</p>
<h2 id="transfers"><a class="header" href="#transfers">Transfers</a></h2>
<p>Helps in transferring external data from SaaS to BigQuery on a regular basis.</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="views-1"><a class="header" href="#views-1">Views</a></h1>
<ul>
<li>don't have storage cost</li>
<li>label, description and expiration time can be added after the creation</li>
<li>can't be renamed, can only copy a table with the desired name and delete the old one</li>
<li>data can't be exported</li>
<li>cannot be referenced in wildcards</li>
</ul>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="when-to-use-clustering-or-partitioning-or-both"><a class="header" href="#when-to-use-clustering-or-partitioning-or-both">When to use Clustering OR Partitioning OR Both</a></h1>
<h2 id="1-partition-only"><a class="header" href="#1-partition-only">1. Partition only</a></h2>
<h3 id="need-of-strict-cost-guarantees-before-running-a-query"><a class="header" href="#need-of-strict-cost-guarantees-before-running-a-query">Need of strict cost guarantees before running a query</a></h3>
<p>in a single partition all the related data that belongs to that partition is stored.</p>
<p><em>For example</em>, a partition of <u>today’s date</u> will contain only today’s data, nothing else. In a query using <code>WHERE data = ..</code> BigQuery will know where to go.</p>
<h3 id="need-to-handlemanage-table-at-partition-level-for-expirations-dml-ops"><a class="header" href="#need-to-handlemanage-table-at-partition-level-for-expirations-dml-ops">Need to handle/manage table at partition-level for expirations, DML ops...</a></h3>
<p>You can set <strong>expiration time</strong> to single partitions and not the entire table.</p>
<h2 id="2-partition-and-clustering"><a class="header" href="#2-partition-and-clustering">2. Partition and Clustering</a></h2>
<h3 id="no-need-of-of-strict-cost-guarantees-before-running-a-query"><a class="header" href="#no-need-of-of-strict-cost-guarantees-before-running-a-query">No need of of strict cost guarantees before running a query</a></h3>
<p>using the <code>WHERE</code> clause and using partitions optimized on it,</p>
<p>When we go into the buckets. It can contain multiple values, so the <strong>entire bucket must be processed</strong></p>
<p><img src="Data%20Analytics%20Services/BigQuery/../../Images/cluster-example.png" alt="&quot;alt&quot;" /></p>
<h3 id="data-is-huge-within-partition"><a class="header" href="#data-is-huge-within-partition">Data is huge within partition</a></h3>
<h3 id="using-frequend-filter-and-aggregate-queries-on-table"><a class="header" href="#using-frequend-filter-and-aggregate-queries-on-table">Using frequend filter and aggregate queries on table</a></h3>
<h3 id="bigquery-automatically-sorts-data-in-a-table-based-on-clustering-columns"><a class="header" href="#bigquery-automatically-sorts-data-in-a-table-based-on-clustering-columns">BigQuery automatically sorts data in a table based on clustering columns</a></h3>
<h2 id="3-clustering-only"><a class="header" href="#3-clustering-only">3. Clustering only</a></h2>
<h3 id="data-is-unique"><a class="header" href="#data-is-unique">Data is unique</a></h3>
<p>And partition would create a large number of partitions (<em>thousands</em>). Here <strong>clustering is better</strong>.</p>
<h3 id="avg-partition-size-is-under-1-gb"><a class="header" href="#avg-partition-size-is-under-1-gb">Avg partition size is under 1 GB</a></h3>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="wildcards"><a class="header" href="#wildcards">Wildcards</a></h1>
<p>Enables to query <strong>multiple tables at once</strong> using <strong>concise SQL statements</strong>.</p>
<p>Them are just <strong>representation of union</strong> of all the tables matching a particular wildcard espression.</p>
<p>Can be used for tables with:</p>
<ul>
<li>similar schema</li>
<li>same prefix</li>
</ul>
<p><img src="Data%20Analytics%20Services/BigQuery/../../Images/wildcards-example.png" alt="&quot;alt&quot;" /></p>
<h3 id="practical-example"><a class="header" href="#practical-example">Practical example</a></h3>
<p>If having a dataset containing tables with the same schema for every year. say:</p>
<p><em>weather2000, weather2001, ... , weather2021</em></p>
<p>you can use</p>
<pre><code class="language-sql">SELECT ...
FROM `dataset.weather200`
</code></pre>
<p>to get the union from years 2000 to 2009</p>
<h2 id="filtering-by-suffix"><a class="header" href="#filtering-by-suffix">Filtering by suffix</a></h2>
<pre><code class="language-sql">SELECT ...
FROM &lt;wildcard&gt;
WHERE _TABLE_SUFFIX = &lt;wanted suffix&gt;
</code></pre>
<h2 id="limitations-3"><a class="header" href="#limitations-3">Limitations</a></h2>
<ol>
<li>Supports Big Query storage only. 
<span class="red">Are not allowed:</span>.
<ul>
<li><span class="red">External tables</span></li>
<li><span class="red">Views</span>, even if in a list of tables</li>
</ul>
</li>
<li>Chached results are not supported. Every query will be billed</li>
<li>Can't be used in Insert/delete/update statements. But it is possible to use wildcards in the <code>WHERE</code></li>
</ol>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="bigquery-1"><a class="header" href="#bigquery-1">BigQuery</a></h1>
<p><a href="Data%20Analytics%20Services/../Notions/Serverless.html">Serverless</a>, scalable cloud data warehouse</p>
<p>Has built-in BI Engine and Machine Learning</p>
<p>Uses SQL dialect </p>
<p>Federated queries can process external data sources:</p>
<ul>
<li><span class="missing-link" style="color:darkred;">Cloud Storage</span></li>
<li><span class="missing-link" style="color:darkred;">Cloud Bigtable</span></li>
<li>Spreadsheets</li>
</ul>
<p>Keeps 7 days history of history</p>
<p>Can analize big amounts of data in seconds</p>
<h2 id="architecture-2"><a class="header" href="#architecture-2"><a href="Data%20Analytics%20Services/BigQuery/Architecture.html">Architecture</a></a></h2>
<h2 id="ui-1"><a class="header" href="#ui-1"><a href="Data%20Analytics%20Services/BigQuery/UI.html">UI</a></a></h2>
<h2 id="how-query-execution-plan-works-1"><a class="header" href="#how-query-execution-plan-works-1"><a href="Data%20Analytics%20Services/BigQuery/Execution%20Plan.html">how Query Execution Plan works</a></a></h2>
<h2 id="query-2"><a class="header" href="#query-2">Query</a></h2>
<p><a href="Data%20Analytics%20Services/BigQuery/Query%20settings.html">Query settings</a>
<a href="Data%20Analytics%20Services/BigQuery/Caching.html">Caching</a>
<a href="Data%20Analytics%20Services/BigQuery/Wildcards.html">Wildcards</a>: Enables to query <strong>multiple tables at once</strong> using concise SQL statements
<a href="Data%20Analytics%20Services/BigQuery/Scheduled%20queries.html">Scheduled queries</a> and backfilling
<a href="Data%20Analytics%20Services/BigQuery/Saved%20queries.html">Saved queries</a></p>
<h2 id="schemas-1"><a class="header" href="#schemas-1">Schemas</a></h2>
<p><a href="Data%20Analytics%20Services/BigQuery/Automatic%20schema%20detection.html">Automatic schema detection</a>
<a href="Data%20Analytics%20Services/BigQuery/Designing%20Efficient%20Schemas.html">Designing Efficient Schemas</a> and <a href="Data%20Analytics%20Services/BigQuery/Designing%20Efficient%20Schemas.html#nested-repeated-data">Designing Efficient Schemas</a></p>
<h2 id="dataset-1"><a class="header" href="#dataset-1">Dataset</a></h2>
<p><a href="Data%20Analytics%20Services/BigQuery/Managing%20access.html">Managing access</a>
<a href="Data%20Analytics%20Services/BigQuery/Copying%20dataset.html">Copying dataset</a>
<a href="Data%20Analytics%20Services/BigQuery/Native%20operations%20on%20Table%20for%20Schema%20change.html">Native operations on Table for Schema change</a>
<a href="Data%20Analytics%20Services/BigQuery/Manual%20operations%20on%20Table.html">Manual operations on Table</a></p>
<h2 id="table-partitioning-2"><a class="header" href="#table-partitioning-2">Table partitioning</a></h2>
<p><a href="Data%20Analytics%20Services/BigQuery/Table%20partitioning.html">Table partitioning</a>
<a href="Data%20Analytics%20Services/BigQuery/Ingestion%20time%20partition%20tables.html">Ingestion time partition tables</a>
<a href="Data%20Analytics%20Services/BigQuery/Field%20partition.html">Field partition</a></p>
<h1 id="clustered-tables-2"><a class="header" href="#clustered-tables-2">Clustered Tables</a></h1>
<p><a href="Data%20Analytics%20Services/BigQuery/Clustered%20Tables.html">Clustered Tables</a>
<a href="Data%20Analytics%20Services/BigQuery/When%20to%20use%20Clustering%20or%20Partitioning%20or%20Both.html">When to use Clustering or Partitioning or Both</a>
==todo== create clustered table
==todo== <a href="Data%20Analytics%20Services/BigQuery/Clustered%20Tables.html#do-and-donts">Clustered Tables</a></p>
<h2 id="loading--querying-external-data-sources-1"><a class="header" href="#loading--querying-external-data-sources-1">Loading &amp; Querying External Data Sources</a></h2>
<p><em>It can be in BigTable, CloudStorage, ClousSQL, Google Drive...</em></p>
<p><a href="Data%20Analytics%20Services/BigQuery/Create%20Cloud%20Storage%20bucket.html">Create Cloud Storage bucket</a>
<a href="Data%20Analytics%20Services/BigQuery/Create%20&amp;%20Query%20Permanent%20Table%20on%20Cloud%20Storage%20bucket.html">Create &amp; Query Permanent Table on Cloud Storage bucket</a>
<a href="Data%20Analytics%20Services/BigQuery/External%20data%20source%20Limitations.html">External data source Limitations</a></p>
<h2 id="views-2"><a class="header" href="#views-2"><a href="Data%20Analytics%20Services/BigQuery/Views.html">Views</a></a></h2>
<p><a href="Data%20Analytics%20Services/BigQuery/Materialized%20Views.html">Materialized Views</a></p>
<h2 id="cli-1"><a class="header" href="#cli-1"><a href="Data%20Analytics%20Services/BigQuery/CLI.html">CLI</a></a></h2>
<h2 id="python-lib-1"><a class="header" href="#python-lib-1"><a href="Data%20Analytics%20Services/BigQuery/Python%20lib.html">Python lib</a></a></h2>
<p><a href="Data%20Analytics%20Services/BigQuery/Example%20of%20End-to-end%20Data%20Pipeline.html">Example of End-to-end Data Pipeline</a>
<a href="Data%20Analytics%20Services/BigQuery/Build%20Streaming%20data%20pipelines.html">Build Streaming data pipelines</a></p>
<h2 id="pricing-2"><a class="header" href="#pricing-2"><a href="Data%20Analytics%20Services/BigQuery/Pricing.html">Pricing</a></a></h2>
<h2 id="best-practices-2"><a class="header" href="#best-practices-2"><a href="Data%20Analytics%20Services/BigQuery/Best%20practices.html">Best practices</a></a></h2>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="cloud-dataflow"><a class="header" href="#cloud-dataflow">Cloud Dataflow</a></h1>
<p>Managed
For <strong>transforming</strong> and <strong>enhancing</strong> data in streams/batches</p>
<p>Based on Apache Beam</p>
<p><a href="Data%20Analytics%20Services/../Notions/Serverless.html">Serverless</a> approach automating <a href="Data%20Analytics%20Services/../Notions/provisioning.html">provisioning</a> and management.</p>
<p>Used for <strong>manipulating</strong> or <strong>preprocessing data</strong></p>
<p><strong>Input</strong> can be <a href="Data%20Analytics%20Services/Cloud%20Pub%20Sub.html">Cloud Pub Sub</a>
<strong>output</strong> <a href="Data%20Analytics%20Services/Big%20Query.html">Big Query</a> or <span class="missing-link" style="color:darkred;">Cloud Storage</span> or <span class="missing-link" style="color:darkred;">Cloud SQL</span></p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h2 id="cloud-datalab"><a class="header" href="#cloud-datalab">Cloud Datalab</a></h2>
<p>Interactive tool for data <strong>exploration</strong>, <strong>analysis</strong>, <strong>visualization</strong> and <strong>Machine Learning</strong>.</p>
<p>Built on Jupyter Notebook</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h2 id="cloud-dataproc"><a class="header" href="#cloud-dataproc">Cloud Dataproc</a></h2>
<p>Managed Apache Hadoop and Apache Spark cluster environments</p>
<p>Automated cluster management</p>
<p>Moving existing Big Data projects without redevelopment</p>
<p>Intgrated with <a href="Data%20Analytics%20Services/Cloud%20Dataflow.html">Cloud Dataflow</a> and <a href="Data%20Analytics%20Services/Big%20Query.html">Big Query</a></p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="cloud-pubsub"><a class="header" href="#cloud-pubsub">Cloud Pub/Sub</a></h1>
<p>Based on publishing/subscription pattern</p>
<p><img src="Data%20Analytics%20Services/../Images/pub-sub-pattern.png" alt="&quot;alt&quot;" /></p>
<p>Fully-Managed real-time messaging service allowing to efficiently send and receive messages between applications and services.</p>
<p>Service used for <a href="Data%20Analytics%20Services/../Notions/Ingestion.html">Ingestion</a> data at scale</p>
<p>Integrated with <span class="missing-link" style="color:darkred;">Cloud Storage</span> and <a href="Data%20Analytics%20Services/Cloud%20Dataflow.html">Cloud Dataflow</a></p>
<p>End-to-end encryption, <a href="Data%20Analytics%20Services/../Identity%20&amp;%20Access%20Management/Identity%20&amp;%20Access%20Management.html">Identity &amp; Access Management</a> </p>
<h2 id="pubblishing-code-example"><a class="header" href="#pubblishing-code-example">Pubblishing code example</a></h2>
<pre><code class="language-python">from google.cloud import pubsub_v1
import time 

publisher = pubsub_v1.PublisherClient()

topic_name = 'projects/bigquery-demo-285417/topics/data_stream_from_file'
try:
    publisher.create_topic(topic_name)

except:
    print ('Topic already exists')

with open('food_daily.csv') as f_in:
    for line in f_in:
        # Data must be a bytestring
        data = line
        future = publisher.publish(topic_name, data=data)
        print(future.result())
        time.sleep(1)

</code></pre>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="datastudio"><a class="header" href="#datastudio">DataStudio</a></h1>
<h1 id="tables"><a class="header" href="#tables">Tables</a></h1>
<h3 id="data-optional-metrics"><a class="header" href="#data-optional-metrics">Data&gt; Optional metrics</a></h3>
<p>Adding other metrics hidden by default.
You can select/deselect them by clicking on the bar icon at the top right of the table.</p>
<h3 id="data--interactions--apply-filter"><a class="header" href="#data--interactions--apply-filter">Data &gt; Interactions &gt; Apply filter</a></h3>
<p>When clicking a row in the table, a filter will be applied to all the data</p>
<h3 id="conditional-formatting-style--metrics"><a class="header" href="#conditional-formatting-style--metrics">Conditional Formatting (Style &gt; Metrics)</a></h3>
<ul>
<li>Heat map</li>
<li>Bar pub/sub</li>
<li>conditiona formatting (custom)</li>
</ul>
<hr />
<h1 id="comparison-calculations"><a class="header" href="#comparison-calculations">Comparison Calculations</a></h1>
<p>Data &gt; Metric &gt; &lt;selected metrics&gt; &gt; Edit &gt; Comparison Calculation</p>
<p>Some optons:</p>
<ul>
<li>Percent of total</li>
<li>Difference from total</li>
<li>Percent difference from total: how much data is different from the total in %</li>
<li>Percentage of max: how much data is different from the highest value in its range in %</li>
<li>Difference from max</li>
<li>Percentage difference from max</li>
</ul>
<h1 id="running-calculations"><a class="header" href="#running-calculations">Running Calculations</a></h1>
<p>Data &gt; Metric &gt; &lt;selected metrics&gt; &gt; Edit &gt; Running Calculation</p>
<p>Also called &quot;Running summaries&quot;</p>
<h2 id="running-sum"><a class="header" href="#running-sum">Running sum</a></h2>
<p>Each new row is added to the sum of the previous row(s).</p>
<p><img src="Data%20Analytics%20Services/../Images/Running-sum-example.png" alt="Running Sum" /></p>
<h1 id="creating-custom-calculation-fields"><a class="header" href="#creating-custom-calculation-fields">Creating custom calculation fields</a></h1>
<p>Resources &gt; Manage added resources &gt; &lt;row of the desired source&gt; &gt; edit &gt; Add field</p>
<p>You need to add a <em>field name</em> and write the formula using existent fields.</p>
<p><strong>Case statement</strong> can also be used</p>
<h3 id="comparison-date-range"><a class="header" href="#comparison-date-range">Comparison Date Range</a></h3>
<p>Data &gt; Comparison Date Range</p>
<p><img src="Data%20Analytics%20Services/comparison-date-range.png" alt="comparison-date-range.png" /></p>
<h1 id="extract-data"><a class="header" href="#extract-data">Extract data</a></h1>
<p>Data Source &gt; Extract Data
<strong>Improves the performance</strong> of reports and explorations by extracting data from your data set creating a <strong>brand new table</strong>.</p>
<p>Can use existing data sources of any type, then select the specific fields you want to include in the extracted data source.</p>
<p>Can set an <strong>Auto-Update</strong></p>
<blockquote>
<p>Extracting data from an <strong>already aggregated</strong> data set, such as Google Ads or Analytics, creates a new, disaggregated data set.</p>
</blockquote>
<h1 id="charts"><a class="header" href="#charts">Charts</a></h1>
<h2 id="drill-down"><a class="header" href="#drill-down">Drill Down</a></h2>
<p>A way to reveal additional levels of detail within a chart by clicking on arrows on the top of the tables.</p>
<p>ex. time series in the order of years, can be drilled down into months</p>
<h2 id="geographics-chart"><a class="header" href="#geographics-chart">Geographics Chart</a></h2>
<p><img src="https://lh3.googleusercontent.com/1NMeArZXBnWOvNbGGa1cDIdikVeNNgakIpxpy1KM8iII26KtVjXZzDI-BGYjFWWwusA=rwa" alt="geo chart" />
Zoom area can be world, single continent, subcontinents and single countries.</p>
<p>Different <strong>chart styles</strong> can be set according to the metrics.</p>
<p>Also the map can be customized: <em>map/satellite, roads, landmarks, labels</em></p>
<h3 id="metric-sliders"><a class="header" href="#metric-sliders">Metric sliders</a></h3>
<p><em>Metrics &gt; Metric sliders</em></p>
<p>A filter can be applied via slider by clicking on the <em>settings icon</em> on the top right of the chart.</p>
<h2 id="custom-visualizations"><a class="header" href="#custom-visualizations">Custom Visualizations</a></h2>
<blockquote>
<p>Caution: </p>
</blockquote>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="devops-services"><a class="header" href="#devops-services">DevOps Services</a></h1>
<p>Tools and frameworks for <strong>automation</strong><br />
<a href="DevOps%20Services/Cloud%20Source%20Repositories.html">Cloud Source Repositories</a> store and track source code</p>
<p><a href="DevOps%20Services/Cloud%20Build.html">Cloud Build</a> automates continuous integration and deployment</p>
<p><a href="DevOps%20Services/Container%20Registry.html">Container Registry</a> acts as the central repository for storing, securing, and managing 
<a href="DevOps%20Services/../Notions/Docker.html">Docker</a> container images</p>
<p>IDE and tools integration enables developer productivity</p>
<h2 id="examples"><a class="header" href="#examples">Examples</a></h2>
<p><a href="DevOps%20Services/Example1.html">Example1</a></p>
<h2 id="use-cases-3"><a class="header" href="#use-cases-3">Use Cases</a></h2>
<p><img src="DevOps%20Services/../Images/UseCases.png" alt="&quot;alt&quot;" /></p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="cloud-build"><a class="header" href="#cloud-build">Cloud Build</a></h1>
<p><a href="DevOps%20Services/../Notions/CI-CD.html">CI-CD</a> tool. It <strong>builds and packs</strong> the application.</p>
<p>Supports <strong>building code in any language</strong></p>
<p>Can create <strong>custom workflows</strong> to deploy across multiple target environments.</p>
<p>Also supports <strong>native <a href="DevOps%20Services/../Notions/Docker.html">Docker</a> integration</strong> with automate deployment to <a href="DevOps%20Services/../Notions/Kubernetes.html">Kubernetes</a> and GKE</p>
<p>It <strong>identifies vulnerabilities</strong> </p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="cloud-source-repositories"><a class="header" href="#cloud-source-repositories">Cloud Source Repositories</a></h1>
<p>Acts as a scalable <strong>Git repository</strong></p>
<p><strong>Extends</strong> standard Git workflow to <a href="DevOps%20Services/Cloud%20Build.html">Cloud Build</a>, <a href="DevOps%20Services/../Data%20Analytics%20Services/Cloud%20Pub%20Sub.html">Cloud Pub Sub</a> and <a href="DevOps%20Services/../Compute%20Services/Compute%20Services.html">Compute Services</a></p>
<p>Has triggers to <strong>automatically</strong> build, test and deploy code</p>
<p>Regex can be used for searching</p>
<p>Useful for <strong>mantaining all the lifecycle</strong> of an application within GCP: from storing code to deployng and iterating over code multiple times.</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="container-registry"><a class="header" href="#container-registry">Container Registry</a></h1>
<p>Stores <a href="DevOps%20Services/../Notions/Docker.html">Docker</a> images and artifacts in a <strong>centralized registry</strong>.</p>
<p>Stores images close to GCE, GKE and Kubernets <strong>clusters</strong></p>
<p>Supports Role-based access control</p>
<p>Detects vulnerabilities in the early stages of software deployment and <strong>locks down</strong> the vulnerable ones.</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><p>Enabling service</p>
<pre><code class="language-ignore">gcloud services enable containerregistry.googleapis.com  
</code></pre>
<p>Initializing ProjectID</p>
<pre><code class="language-ignore">export PROJECT_ID=&lt;PROJECT ID&gt; # Replace this with your GCP Project
ID  
</code></pre>
<p>Getting Busybox</p>
<pre><code class="language-ignore">docker pull busybox  
docker images  
</code></pre>
<p>Creating code (using vim Dockerfile)</p>
<pre><code class="language-ignore">cat &lt;&lt;EOF &gt;&gt;Dockerfile  
from busybox:latest  
CMD [&quot;date&quot;]  
EOF
</code></pre>
<p>Building</p>
<pre><code class="language-ignore">docker build . -t mybusybox  
</code></pre>
<p>Tagging following GCP Container Registry convention</p>
<pre><code class="language-ignore">docker tag mybusybox gcr.io/$PROJECT_ID/mybusybox:latest  
</code></pre>
<p>Running</p>
<pre><code class="language-ignore">docker run gcr.io/$PROJECT_ID/mybusybox:latest  
</code></pre>
<p>Wiring credentials of GCP Container Registry with Docker</p>
<pre><code class="language-ignore">gcloud auth configure-docker  
</code></pre>
<p>Pushing image to container registry</p>
<pre><code class="language-ignore">docker push gcr.io/$PROJECT_ID/mybusybox:latest
</code></pre>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="project"><a class="header" href="#project">Project</a></h1>
<p>Is a critical, <strong>billable unit</strong> with credit associated.
It is not a resource, just a <strong>logical grouping</strong></p>
<p>Every <a href="GCP-Notions/Resource.html">Resource</a> belongs to a <strong>project</strong>.
May be organized in <strong>folders</strong>.
Organization is an entity <strong>at the top</strong> of the hierarchy. (Only visible if using <em>GSuite</em>, otherwise is not visible)</p>
<p><img src="GCP-Notions/../Images/Project_Hierarchy.png" alt="&quot;alt&quot;" /></p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="resource"><a class="header" href="#resource">Resource</a></h1>
<p>When launching, it results a creation of <strong>resources</strong></p>
<p><em>i.e. VM in Compute Engine
app in App Engine
StorageBucket in Google Sources</em></p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="cloud-iam"><a class="header" href="#cloud-iam">Cloud IAM</a></h1>
<p>Defines <strong>who</strong>(<span class="green">identity</span>) and <strong>what</strong> (<span class="orange">role</span>) for <strong>which</strong> <em><strong>resource</strong></em></p>
<p>Based on <strong>least privilege principle</strong>: meaning default deny</p>
<p>IAM policy: binds identity to roles which contains permissions. Member is assocated to a role and inherits all the privileges</p>
<h2 id="identity"><a class="header" href="#identity">Identity</a></h2>
<p>Associated with users or members accessing to resources. Is based on:</p>
<ul>
<li>Google account</li>
<li>service account</li>
<li>google group</li>
<li>Gsuite domain</li>
<li>Cloud Identity domain</li>
</ul>
<p>Has implicit aliases:</p>
<ul>
<li>allAuthenticatedUsers</li>
<li>allUsers</li>
</ul>
<h2 id="permissions"><a class="header" href="#permissions">Permissions</a></h2>
<p>Determine the operations performed on a resource.
Corresponds to REST api: the're a <strong>mapping</strong> to REST APIs exposed by GCP resources
Can't be assigned directly to members/users, instead are grouped to a role</p>
<h2 id="roles"><a class="header" href="#roles">Roles</a></h2>
<h3 id="primitives"><a class="header" href="#primitives">Primitives</a></h3>
<ol>
<li>Owner</li>
<li>Editor</li>
<li>Viewer</li>
</ol>
<h3 id="predefined"><a class="header" href="#predefined">Predefined</a></h3>
<p>related to GCP services
They're assigned to every resource or service</p>
<h3 id="custom-roles"><a class="header" href="#custom-roles">Custom roles</a></h3>
<p>Collection of assorted set of permissions
Provides very fine-grades access to resources</p>
<h2 id="service-accounts"><a class="header" href="#service-accounts">Service Accounts</a></h2>
<p>Special Google account that belongs to an application or VM
ex the app programmatically creates resources: it needs permissions to do that</p>
<p>Identified by unique email address + a <strong>token</strong> that associates the resource with the rest of GPC services</p>
<p>There are 2 types:</p>
<ul>
<li>User managed</li>
<li>Google managed</li>
</ul>
<p>Each one is associated with one or more roles</p>
<h2 id="where-you-use-iam"><a class="header" href="#where-you-use-iam">Where you use IAM?</a></h2>
<p>When sharing GCP resources with fine-grained control
Selectively allow/deny permissions to individual resources
Define custom reoles specific to a team 
Enable authentication of applications trough service accounts</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="network-services"><a class="header" href="#network-services">Network Services</a></h1>
<p>Relies on Google's global network.</p>
<ul>
<li>Has load balancers</li>
<li>is a Virtual Prvate Cloud</li>
</ul>
<h2 id="load-balancing"><a class="header" href="#load-balancing">Load balancing</a></h2>
<p>Can route requests also across the globe</p>
<p>2 types:</p>
<ul>
<li><strong>HTTPS</strong>: Global load balancing</li>
<li><strong>Network</strong>: endpoints of the same <u>region</u></li>
</ul>
<p>Both can be internal or external for <em>scalability</em></p>
<p>![&quot;alt&quot;](../Images/Load Balancing.png)</p>
<h2 id="virtual-prvate-cloud"><a class="header" href="#virtual-prvate-cloud">Virtual Prvate Cloud</a></h2>
<p>Software-defined network providing private networking for VMs.</p>
<p>It is useful for <strong>sensitive sources</strong></p>
<p>To enable private networking (=an isolated space) within the public cloud and deploy applications/resources in that zone.</p>
<p>Isolates VMs running inside the VPCs</p>
<ul>
<li>Is a <u>global resource</u> visible from any region</li>
<li>Each one is <u>logically</u> isolated from the others</li>
<li>Traffic within networs can be restricted via firewall</li>
<li>Has private DNS</li>
<li>Multiple VPCs can be connected trough <strong>peering</strong></li>
</ul>
<h2 id="hybrid-connectivity"><a class="header" href="#hybrid-connectivity">Hybrid Connectivity</a></h2>
<p>Extending local datacenter <strong>steamlessly</strong> to GCP infrastructure</p>
<p>3 services:</p>
<ul>
<li><strong>Cloud interconnect</strong>: Extends on-premises network via dedicated (<em>Google</em>) or parthner interconnect.</li>
<li><strong>Cloud VPN</strong>: for basic secure connectivity</li>
<li><strong>Peering</strong>: Direct access to Google Cloud resources with reduced internet edges fee</li>
</ul>
<p>![&quot;alt&quot;](../../Images/Pasted image 20211230171158.png)</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="continuous-integration---continuous-delivery"><a class="header" href="#continuous-integration---continuous-delivery">Continuous Integration - Continuous Delivery</a></h1>
<p>CI/CD is a method to frequently deliver apps to customers by introducing automation into the stages of app development.</p>
<p>CI/CD is a solution to the problems integrating new code can cause for development and operations teams (AKA &quot;integration hell&quot;).</p>
<p>Specifically, CI/CD introduces ongoing automation and continuous monitoring throughout the lifecycle of apps, from integration and testing phases to delivery and deployment.</p>
<p>Taken together, these connected practices are often referred to as a &quot;CI/CD pipeline&quot;</p>
<h2 id="continuous-integration"><a class="header" href="#continuous-integration">Continuous Integration</a></h2>
<p>Means new code changes to an app are regularly built, tested, and merged to a shared repository.</p>
<p>It’s a solution to the problem of having too many branches of an app in development at once that might conflict with each other.</p>
<h2 id="continuous-delivery--continuous-deployment"><a class="header" href="#continuous-delivery--continuous-deployment">Continuous Delivery / Continuous Deployment</a></h2>
<p>Both are about automating further stages of the pipeline, but they’re sometimes used separately to illustrate just how much automation is happening.</p>
<h3 id="continuous-delivery"><a class="header" href="#continuous-delivery">Continuous Delivery</a></h3>
<p>usually means a developer’s changes to an application are automatically bug tested and uploaded to a repository (like GitHub or a container registry), where they can then be deployed to a live production environment by the operations team.</p>
<p>It’s an answer to the problem of poor visibility and communication between dev and business teams. To that end, the purpose of continuous delivery is to ensure that it takes minimal effort to deploy new code.</p>
<h3 id="continuous-deployment-the-other-possible-cd"><a class="header" href="#continuous-deployment-the-other-possible-cd">Continuous deployment (the other possible &quot;CD&quot;)</a></h3>
<p>can refer to automatically releasing a developer’s changes from the repository to production, where it is usable by customers.</p>
<p>It addresses the problem of overloading operations teams with manual processes that slow down app delivery.</p>
<p>It builds on the benefits of continuous delivery by automating the next stage in the pipeline.</p>
<p><img src="https://www.redhat.com/cms/managed-files/styles/wysiwyg_full_width/s3/ci-cd-flow-desktop.png?itok=2EX0MpQZ" alt="CI/CD Flow" title="CI/CD Flow" /></p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="docker"><a class="header" href="#docker">Docker</a></h1>
<p>Docker is an open source platform for building, deploying, and managing containerized applications.</p>
<p>It enables developers to <u>package applications</u> into <strong>containers</strong>: standardized executable components combining:</p>
<ul>
<li>application source code</li>
<li>the operating system (OS) libraries</li>
<li>dependencies 
Required to run that code in <u>any environment</u>.</li>
</ul>
<blockquote>
<p>containers can be created without Docker, but the platform makes it easier, simpler, and safer to build, deploy and manage containers</p>
</blockquote>
<p>Docker is essentially a <strong>toolkit</strong> that enables developers to build, deploy, run, update, and stop containers using simple commands and work-saving automation through a single API.</p>
<h2 id="how-containers-work"><a class="header" href="#how-containers-work">How containers work</a></h2>
<p>Containers are made possible by <strong>process isolation</strong> and <strong>virtualization</strong> capabilities built into the <u>Linux kernel</u>.</p>
<p>These capabilities enable multiple application components to <strong>share the resources</strong> of a single instance <strong>of the host operating system</strong> as (much) <strong>same as hypervisor enables multiple virtual machines (VMs)</strong> to share the CPU, memory and other resources of a single hardware server. </p>
<p>As a result, container technology offers all the functionality and benefits of VMs - <em>including application isolation, cost-effective scalability, and disposability</em> - plus important additional advantages:</p>
<ul>
<li><strong>Lighter weight:</strong> Unlike VMs, containers don’t carry the payload of an entire OS instance and hypervisor; they include only the OS processes and dependencies necessary to execute the code.</li>
<li><strong>Greater resource efficiency</strong></li>
<li><strong>Improved developer productivity</strong>: Compared to VMs, containers are faster and easier to deploy, provision and restart. This makes them ideal for use in <a href="Notions/CI-CD.html">CI-CD</a> pipelines and a better fit for development teams adopting Agile and DevOps practices.</li>
</ul>
<h2 id="docker-tools-and-terms"><a class="header" href="#docker-tools-and-terms">Docker tools and terms</a></h2>
<h3 id="dockerfile"><a class="header" href="#dockerfile"><strong>DockerFile</strong></a></h3>
<p>Every Docker container starts with a simple text file containing instructions for how to build the Docker container image. </p>
<p><em>DockerFile</em> automates the process of Docker image creation.
It’s essentially a list of command-line interface (CLI) instructions that Docker Engine will run in order to assemble the image.</p>
<h3 id="docker-images"><a class="header" href="#docker-images"><strong>Docker images</strong></a></h3>
<p><em>Docker images</em> contain executable application source code as well as all the tools, libraries, and dependencies that the application code needs to run as a container. </p>
<p>When you run the Docker image, it becomes one <strong>instance</strong> (or multiple instances) of the container.</p>
<h3 id="docker-containers"><a class="header" href="#docker-containers"><strong>Docker containers</strong></a></h3>
<p>Docker containers are the live, running instances of Docker images.</p>
<h3 id="docker-daemon"><a class="header" href="#docker-daemon"><strong>Docker daemon</strong></a></h3>
<p>Docker daemon is a service running on your operating system. </p>
<p>This service creates and manages your Docker images for you using the commands from the client, acting as the control center of your Docker implementation.</p>
<h3 id="docker-registry"><a class="header" href="#docker-registry"><strong>Docker registry</strong></a></h3>
<p>A Docker registry is a scalable open-source storage and distribution system for docker images. The registry enables you to track image versions in repositories, using tagging for identification. This is accomplished using git, a version control tool.</p>
<h2 id="docker-deployment-and-orchestration"><a class="header" href="#docker-deployment-and-orchestration">Docker deployment and orchestration</a></h2>
<p>To monitor and manage container lifecycles in more complex environments, you’ll need to turn to a <strong>container orchestration tool</strong>. 
While Docker includes its own orchestration tool (called Docker Swarm), most developers choose <a href="Notions/Kubernetes.html">Kubernetes</a> instead.</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="data-ingestion"><a class="header" href="#data-ingestion">Data Ingestion</a></h1>
<p>Data ingestion is the process of obtaining and importing data for immediate use or storage in a database. </p>
<p>Data can be streamed in real time or ingested in batches.</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="kubernetes"><a class="header" href="#kubernetes">Kubernetes</a></h1>
<p>is an open source <strong>container orchestration platform</strong> that automates many of the manual processes involved in deploying, managing, and scaling containerized applications.</p>
<h2 id="features"><a class="header" href="#features">Features</a></h2>
<ul>
<li><strong>Controlling resource consumption</strong> by application or team</li>
<li>Evenly spreading application load across a host infrastructure with different:
<ul>
<li>datacenters</li>
<li>hardware</li>
<li>hosting providers</li>
</ul>
</li>
<li><strong>Automatically load balancing</strong> requests across the different instances of an application</li>
<li><strong>Monitoring resource consumption and resource limits</strong> to automatically stop applications from consuming too many resources and restarting the applications again</li>
<li><strong>Moving an application instance from one host to another</strong> if there is a shortage of resources in a host, or if the host dies</li>
<li>Automatically <strong>leveraging additional resources</strong> made available when a new host is added to the cluster</li>
<li>Easily performing <a href="https://medium.com/google-cloud/kubernetes-canary-deployments-for-mere-mortals-13728ce032fe">canary deployments</a> and rollbacks</li>
</ul>
<blockquote>
<p><strong>Kubernetes is cloud-agnostic</strong></p>
</blockquote>
<p><img src="https://newrelic.com/sites/default/files/styles/1200w/public/2021-05/kubernetes_architecture-1024x649.jpeg?itok=224Yqhs6" alt="Kubernetes Architecture" /></p>
<h2 id="kubernetes-master"><a class="header" href="#kubernetes-master">Kubernetes master</a></h2>
<p>The Kubernetes master is the <strong>access point</strong> (or the control plane) from which administrators and other users interact with the cluster to manage the scheduling and deployment of containers. </p>
<p>A cluster will always have at least one master, but may have more depending on the cluster’s replication pattern.</p>
<h2 id="nodes"><a class="header" href="#nodes">Nodes</a></h2>
<p>All nodes in a Kubernetes cluster must be configured with a container runtime, which is usually <a href="Notions/Docker.html">Docker</a>. 
The container runtime starts and manages the containers as Kubernetes deploys them to nodes in the cluster. </p>
<p>Applications (web servers, databases, API servers, etc.) run inside the containers.</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="nosql"><a class="header" href="#nosql">NoSQL</a></h1>
<h2 id="why-should-you-use-a-nosql-database"><a class="header" href="#why-should-you-use-a-nosql-database">Why should you use a NoSQL database?</a></h2>
<p>NoSQL databases are a great fit for many modern applications such as mobile, web, and gaming that require flexible, scalable, high-performance, and highly functional databases to provide great user experiences.</p>
<ul>
<li><strong>Flexibility:</strong> NoSQL databases generally provide flexible schemas that enable faster and more iterative development. The flexible data model makes NoSQL databases ideal for semi-structured and unstructured data.</li>
<li><strong>Scalability:</strong> NoSQL databases are generally designed to scale out by using distributed clusters of hardware instead of scaling up by adding expensive and robust servers. Some cloud providers handle these operations behind-the-scenes as a fully managed service.</li>
<li><strong>High-performance:</strong> NoSQL database are optimized for specific data models and access patterns that enable higher performance than trying to accomplish similar functionality with relational databases.</li>
<li><strong>Highly functional:</strong> NoSQL databases provide highly functional APIs and data types that are purpose built for each of their respective data models.</li>
</ul>
<h2 id="example-simple-book-database"><a class="header" href="#example-simple-book-database">Example: Simple book database</a></h2>
<h3 id="relational-database"><a class="header" href="#relational-database">Relational Database</a></h3>
<p>A book record is often dissembled (or “normalized”) and stored in <strong>separate tables</strong>
<strong>Relationships</strong> are defined by primary and foreign key constraints.</p>
<p>The relational model is designed to enable the database to:</p>
<ul>
<li>enforce referential integrity between tables in the database</li>
<li>normalized to reduce the redundancy</li>
<li>generally optimized for storage</li>
</ul>
<p><strong>Books table</strong> has columns for <strong>ISBN</strong>, <strong>Book Title</strong>, and <strong>Edition Number</strong>,
<strong>Authors</strong> table has columns for <strong>AuthorID</strong> and <strong>Author Name</strong>, 
<strong>Author-ISBN</strong> table has columns for <strong>AuthorID</strong> and <strong>ISBN</strong></p>
<h3 id="nosql-1"><a class="header" href="#nosql-1">NoSQL</a></h3>
<p>A book record is usually stored in a <strong>JSON</strong> document</p>
<p>Data is optimized for intuitive development and horizontal scalability</p>
<p>the item, <strong>ISBN</strong>, <strong>Book Title</strong>, <strong>Edition Number</strong>, <strong>Author Name</strong>, and <strong>AuthorID</strong> are stored as attributes in a single document</p>
<p>-----see &quot;# SQL (relational) vs. NoSQL (nonrelational) databases&quot;  https://aws.amazon.com/nosql/?nc1=h_ls -----</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="normalization-and-denormalization-database"><a class="header" href="#normalization-and-denormalization-database">Normalization and Denormalization (database)</a></h1>
<h2 id="normalization"><a class="header" href="#normalization">Normalization</a></h2>
<p>Data is stored in <strong>separate logical tables</strong> and attempt to <strong>minimize redundant data</strong>. 
We may strive to have only one copy of each piece of data in database.</p>
<p>Usially <strong>core data</strong> is organized in one main table. Other data is on other tables.</p>
<p><img src="Notions/../Images/normalization.png" alt="&quot;alt&quot;" /></p>
<p>Has the <strong><span class="red">con</span></strong> of slowing down queries .</p>
<h2 id="denormalization"><a class="header" href="#denormalization">Denormalization</a></h2>
<p>Denormalization is a database <strong>optimization technique</strong> in which we add redundant data to one or more tables.</p>
<p><em><strong>Note that</strong></em> denormalization <u>does not mean not doing normalization</u>. It is an optimization technique that is applied <strong>after doing normalization</strong>.</p>
<p><strong>Pros:</strong> </p>
<ol>
<li>Retrieving data is faster since we do fewer joins</li>
<li>Queries to retrieve can be simpler(and therefore less likely to have bugs), <br />
since we need to look at fewer tables.</li>
</ol>
<p><strong>Cons:</strong>  </p>
<ol>
<li>Updates and inserts are more expensive.</li>
<li>Denormalization can make update and insert code harder to write.</li>
<li>Data may be inconsistent . Which is the “correct” value for a piece of data?</li>
<li>Data redundancy necessitates more storage.</li>
</ol>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="relational-database-management-system"><a class="header" href="#relational-database-management-system">Relational Database Management System</a></h1>
<p>Is a Database Management System based on Relational model</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="rest"><a class="header" href="#rest">REST</a></h1>
<p>Achronym for <strong>RE</strong>presentational <strong>S</strong>tate <strong>T</strong>ransfer.</p>
<p>REST is a set of <strong>architectural principles</strong> or <em><strong>guidelines</strong></em>, 
SOAP, instead is a W3C protocol. So REST is <strong>not a protocol</strong></p>
<p>Because it's a set of guidelines, it leaves the implementation of these recommendations to developers</p>
<h2 id="how-it-works"><a class="header" href="#how-it-works">How it works</a></h2>
<p>When a <strong>request is sent</strong>, it is done trough <u>HTTP</u>.
The <strong>response</strong> messages can be sent in a variety of formats: HTML, XML, plain text, and JSON.</p>
<h2 id="restful-applications"><a class="header" href="#restful-applications">RESTful applications</a></h2>
<p>Must follow this guidelines:</p>
<ol>
<li>A <strong>client-server architecture</strong> composed of clients, servers, and resources</li>
<li><a href="https://www.redhat.com/en/topics/cloud-native-apps/stateful-vs-stateless">Stateless</a> client-server communication = <u>no client content is stored</u> on the server between requests. 
Information about the session’s state is instead held with the client.</li>
<li><strong>Cacheable data</strong> to eliminate the need for some client-server interactions</li>
<li>A <strong>uniform interface between components</strong> so that <u>information is transferred in a standardized form</u> instead of specific to an application’s needs.</li>
<li>A l<strong>ayered system constraint</strong>, where client-server interactions can be mediated by hierarchical layers.</li>
<li><strong>Code on demand</strong>, allowing servers to extend the functionality of a client by <u>transferring executable code</u> (though also reducing visibility, making this an optional guideline).</li>
</ol>
<h2 id="soap"><a class="header" href="#soap">SOAP</a></h2>
<p>SOAP is a standard protocol, it imposes built-in rules that increase its complexity and overhead, which can lead to longer page load times.</p>
<p>However, these standards also offer <strong>built-in compliances</strong> that can make it <strong>preferable for enterprise scenarios</strong>.
These include security, atomicity, consistency, isolation, and durability (ACID), which is a set of properties for ensuring reliable database transactions.</p>
<p>Common web service specifications include:</p>
<ul>
<li><strong>Web services security (WS-security)</strong>: Standardizes how messages are secured and transferred through unique identifiers called tokens.</li>
<li><strong>WS-ReliableMessaging</strong>: Standardizes error handling between messages transferred across unreliable IT infrastructure.</li>
<li><strong>Web services addressing (WS-addressing)</strong>: Packages routing information as metadata within SOAP headers, instead of maintaining such information deeper within the network.</li>
<li><strong>Web services description language (WSDL)</strong>: Describes what a web service does, and where that service begins and ends.</li>
</ul>
<h2 id="rest-vs-soap"><a class="header" href="#rest-vs-soap">REST vs SOAP</a></h2>
<p><strong>REST</strong> APIs are <strong>lightweight</strong>, making them ideal for newer contexts like IOT, mobile application development, and serverless computing. </p>
<p><strong>SOAP</strong> web services offer <strong>built-in security</strong> and transaction compliance that align with many enterprise needs, but that also makes them <strong>heavier</strong>.</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="serverless-computing"><a class="header" href="#serverless-computing">Serverless Computing</a></h1>
<p>is a cloud computing execution model in which the cloud provider allocates <strong>machine resources on demand</strong>, taking care of the servers on behalf of their customers.</p>
<p>No need to provision or configure resources beforehand.</p>
<p>&quot;Serverless&quot; is a misnomer: servers are still used by cloud service providers to execute code for developers.</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="sql-window-function"><a class="header" href="#sql-window-function">SQL Window Function</a></h1>
<p>Performs calculations on a set of rows that are related together. </p>
<p>But, <u>unlike the aggregate functions</u>, windowing functions <strong>do not collapse the result</strong> of the rows into a single value. 
Instead, all the rows <strong>maintain their original identity</strong> and the calculated <strong>result is returned for every row</strong>.</p>
<p><img src="Notions/../Images/SQL-Window_fn.png" alt="&quot;alt&quot;" /></p>
<h2 id="windowing-with-partition-by"><a class="header" href="#windowing-with-partition-by">Windowing with PARTITION BY</a></h2>
<p>The <strong>PARTITION BY</strong> clause is used in conjunction with the OVER clause. It breaks up the rows into different partitions. These partitions are then acted upon by the window function.</p>
<p>For example, to display the total salary per job category for all the rows we would have to modify our original SQL query as follows:</p>
<p><img src="Notions/../Images/SQL-window_fn2.png" alt="&quot;alt&quot;" /></p>
<h2 id="arranging-rows-within-partitions"><a class="header" href="#arranging-rows-within-partitions">Arranging Rows within Partitions</a></h2>
<p>We know that to arrange rows in a table, we can use the ORDER BY clause. So, to arrange rows within each partition, we have to modify the OVER clause with the ORDER BY clause.</p>
<p><img src="Notions/../Images/SQL-window_fn3.png" alt="&quot;alt&quot;" /></p>
<h2 id="window-functions"><a class="header" href="#window-functions">Window functions</a></h2>
<p><a href="https://www.analyticsvidhya.com/blog/2020/12/window-function-a-must-know-sql-concept/#h2_10">More at</a></p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><p>Failover is switching to a redundant or standby computer server, system, hardware component or network upon the failure or abnormal termination of the previously active application, server, system, hardware component, or network in a computer network.</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="in-memory-database"><a class="header" href="#in-memory-database">In-Memory Database</a></h1>
<p>Are purpose-built (means ad-hoc built) relying primarly on memory.
Are designed to enable minimal response times by eliminating the need to access disks.</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="on-premises-software"><a class="header" href="#on-premises-software">on-premises software</a></h1>
<p>in contrapposizione con Saas</p>
<p>Is installed and runs on computers <strong>locally</strong> on the premises of the person or organization using the software, rather than at a remote facility such as a server farm or cloud. </p>
<p>The software consists of database and modules that are combined to particularly serve the unique needs of the large organizations regarding the automation of corporate-wide business system and its functions.</p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="provisioning"><a class="header" href="#provisioning">Provisioning</a></h1>
<p>Provisioning is the process of <strong>setting up IT infrastructure</strong>. 
It can also refer to the steps required to manage access to data and resources, and make them available to users and systems.</p>
<h2 id="server-provisioning"><a class="header" href="#server-provisioning">Server provisioning</a></h2>
<p>Ss the process of setting up a server to be used in a network based on required resources. </p>
<p>Provisioning can encompass all of the operations needed to create a new machine and bring it to a working state, and includes defining the desired state of the system.</p>
<p>Includes:</p>
<ul>
<li>setting up the physical hardware in a datacenter,</li>
<li>installing and configuring software,including the operating system and applications</li>
<li>connecting it to middleware, networks, and storage.</li>
</ul>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script><div style="break-before: page; page-break-before: always;"></div><h1 id="google-cloud-platform"><a class="header" href="#google-cloud-platform">Google Cloud Platform</a></h1>
<h2 id="gcp-vs-others"><a class="header" href="#gcp-vs-others">GCP vs others</a></h2>
<p><img src="Images/GCP_vs_others.png" alt="Images/GCP_vs_others.png" /></p>
<h2 id="network"><a class="header" href="#network">Network</a></h2>
<p>GCP is divided in <strong>regions</strong> -&gt; <strong>zones</strong> -&gt; <strong>network edge locations</strong> </p>
<h2 id="the-big-picture"><a class="header" href="#the-big-picture">The Big picture</a></h2>
<p><img src="Images/GCP_BigPicture.png" alt="&quot;alt&quot;" /></p>
<h2 id="resources"><a class="header" href="#resources">Resources</a></h2>
<p>When launching, it results a creation of <a href="GCP-Notions/Resource.html">Resource</a>s</p>
<h2 id="projects"><a class="header" href="#projects">Projects</a></h2>
<p><a href="GCP-Notions/Project.html">Project</a> is a critical, <strong>billable unit</strong> with credit associated.</p>
<h2 id="interacting-with-gcp"><a class="header" href="#interacting-with-gcp">Interacting with GCP</a></h2>
<p>Can be done via:</p>
<ul>
<li>Web Console</li>
<li>Cloud Shell / Cloud SDK</li>
<li>Mobile App</li>
<li>CLI (DevOps)</li>
<li><a href="Notions/REST.html">REST</a> API</li>
</ul>
<h2 id="compute-services-1"><a class="header" href="#compute-services-1"><a href="Compute%20Services/Compute%20Services.html">Compute Services</a></a></h2>
<h2 id="storage--database-services-1"><a class="header" href="#storage--database-services-1"><a href="Data%20Analytics%20Services/BigQuery/Storage%20&amp;%20Database%20Services/Storage%20&amp;%20Database%20Services.html">Storage &amp; Database Services</a></a></h2>
<h2 id="network-services-1"><a class="header" href="#network-services-1"><a href="Network%20Services/Network%20Services.html">Network Services</a></a></h2>
<h1 id="security--identity-services"><a class="header" href="#security--identity-services">Security &amp; Identity Services</a></h1>
<p><a href="Identity%20&amp;%20Access%20Management/Identity%20&amp;%20Access%20Management.html">Identity &amp; Access Management</a></p>
<p><a href="Data%20Analytics%20Services/BigQuery/Storage%20&amp;%20Database%20Services/database_services.html">database_services</a></p>
<p><a href="Data%20Analytics%20Services/Data%20Analytics%20Services.html">Data Analytics Services</a></p>
<p><a href="AI%20&amp;%20ML%20Services/AI%20&amp;%20ML%20Services.html">AI &amp; ML Services</a></p>
<p><a href="DevOps%20Services/DevOps%20Services.html">DevOps Services</a></p>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css" integrity="sha384-zTROYFVGOfTw7JV7KUu8udsvW2fx4lWOsCEDqhBreBwlHI4ioVRtmIvEThzJHGET" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.20/dist/katex.min.js" integrity="sha384-ov99pRO2tAc0JuxTVzf63RHHeQTJ0CIawbDZFiFTzB07aqFZwEu2pz4uzqL+5OPG" crossorigin="anonymous"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var math = document.querySelectorAll("[class^=katex]");
    for (var i = 0; i < math.length; i++) {
      // Convert escaped ampersands before rendering
      var toRender = math[i].textContent.replace(/&amp;/g, '&');
      katex.render(toRender, math[i]);
    }
}, false)
</script>
                    </main>
                </div>
            </div>
        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
    </body>
</html>
